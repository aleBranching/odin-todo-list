(()=>{"use strict";class e{static loadAddProject(){function e(e,t){const r=document.createElement("button"),s=document.createElement("span");s.classList="material-symbols-outlined",s.textContent=e;const c=document.createTextNode(t);return r.appendChild(s),r.appendChild(c),r.id=`form${t}`,r.addEventListener("click",(e=>{e.preventDefault()})),r}const t=document.createElement("form");t.id="addProjectForm";const r=document.createElement("label");r.setAttribute("for","projectName"),r.innerText="Name:";const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("name","projectName"),s.setAttribute("id","projectName"),s.required=!0,console.log(s);const c=document.createElement("div");return c.classList="buttons",c.appendChild(e("done","Submit")),c.appendChild(e("cancel","Cancel")),t.appendChild(r),t.appendChild(s),t.appendChild(c),t}static returnProjectItem(e){const t=document.createElement("div");return t.textContent=e,t.id="projectItem",t}static returnAddProjectBTN(){const e=document.createElement("div");return e.textContent="+ Add project",e.id="projectAdder",e}}class t{static createTask(e,t){const r=document.createElement("div");r.classList="task";const s=document.createElement("div");s.classList="taskInfo";const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("name","finishedTask"),c.setAttribute("id","finishedTask");const n=document.createElement("input");n.setAttribute("type","date"),n.value=e,n.readOnly=!0;const a=document.createElement("div");a.classList="noteText",a.textContent=t,s.appendChild(c),s.appendChild(n),s.appendChild(a),r.appendChild(s);const o=document.createElement("div");o.classList="functions";const d=document.createElement("span");d.classList="material-symbols-outlined edit",d.textContent="edit";const i=document.createElement("span");return i.textContent="delete",i.classList="material-symbols-outlined delete",o.appendChild(d),o.appendChild(i),r.appendChild(o),r}static createAddTask(){const e=document.createElement("div");return e.classList="addTask",e.textContent="+ Add Task",e}static createTaskForm(){const e=document.createElement("div");e.classList="addTaskForm",e.innerHTML='\n    <form action="">\n      <div>\n        <label for="date">Date:</label>\n        <input type="date" name="taskDate" id="taskDate" />\n        <label for="Task">Task:</label>\n        <input type="text" name="taskText" id="taskText" />\n      </div>\n      <div class="taskFormButtons">\n        <button id="formSubmit">\n          <span class="material-symbols-outlined">done</span>Submit\n        </button>\n        <button id="formCancel">\n          <span class="material-symbols-outlined">cancel</span>Cancel\n        </button>\n      </div>\n    </form>\n  ';const t=e.querySelector("#formSubmit"),r=e.querySelector("#formCancel");return t.addEventListener("click",(e=>{e.preventDefault()})),r.addEventListener("click",(e=>{e.preventDefault()})),e}}class r{constructor(e){this.name=e,this.tasks=[]}setName(e){this.name=e}getName(){return this.name}getTasks(){return this.tasks}getTask(e){return this.tasks.find((t=>t.getName()===e))}removeTask(e){return this.tasks=this.tasks.filter((t=>t.getName()!==e)),this.tasks}addTask(e){return this.tasks.push(e)}}class s{constructor(e,t){this.name=e,this.date=t,this.done=!1}setDate(e){this.date=e}toggleDone(){this.done=!this.done}getDate(){return this.date}setName(e){this.name=e}getName(){return this.name}}const c=new class{constructor(){this.projects=[],this.projects.push(new r("main"))}getProjects(){return this.projects}getProjectsNotMain(){return this.projects.filter((e=>"main"!==e.getName()))}getAProject(e){return this.projects.find((t=>t.getName()===e))}addProject(e){return this.projects.push(new r(`${e}`))}};c.addProject("test"),c.getAProject("test").addTask(new s("Do homework","2023-01-19")),c.getAProject("main").addTask(new s("get rizz","2023-01-19")),c.getAProject("main").addTask(new s("Go rock climbing","2024-02-21"));const n=c;class a{static loadPage(){this.addProjectListener(),this.projectListener(),this.addTaskListener(),this.addCurrentProjects(),this.differentProjectSelected("main")}static currentProjectOBJ=n.getAProject("main");static createHeader(){const e=document.createElement("div");return e.classList="header",e}static createFooter(){const e=document.createElement("div");return e.classList="footer",e}static addProjectFormBTNS(){const t=document.querySelector("#formSubmit"),r=document.querySelector("#formCancel"),s=document.querySelector("#projectName"),c=document.querySelector("#addProjectForm");s.focus(),t.addEventListener("click",(t=>{if(t.preventDefault(),""!==s.value&&null==n.getAProject(s.value)){s.textContent="",c.replaceWith(e.returnAddProjectBTN()),this.addProjectListener();const t=document.querySelector("div#projectAdder"),r=e.returnProjectItem(s.value);t.before(r),console.log(r),n.addProject(s.value),r.addEventListener("click",(()=>{this.differentProjectSelected(s.value)}))}})),r.addEventListener("click",(t=>{t.preventDefault(),console.log("test"),c.replaceWith(e.returnAddProjectBTN()),this.addProjectListener()}))}static addCurrentProjects(){const t=n.getProjectsNotMain();console.log(t);const r=document.querySelector("div#projectAdder");t.forEach((t=>{const s=e.returnProjectItem(t.getName());r.before(s),s.addEventListener("click",(()=>{this.differentProjectSelected(t.getName())}))}))}static projectListener(){document.querySelector(".primary > div:nth-child(1)").addEventListener("click",(()=>{console.log(n.getAProject("main")),this.differentProjectSelected("main")}))}static addProjectListener(){const t=document.querySelector("#projectAdder");t.addEventListener("click",(()=>{t.replaceWith(e.loadAddProject()),this.addProjectFormBTNS()}))}static taskListener(e){const r=e.querySelector(".delete"),s=e.querySelector(".edit"),c=e.querySelector("#finishedTask"),n=e.querySelector(".noteText").textContent;r.addEventListener("click",(()=>{e.remove(),this.currentProjectOBJ.removeTask(n)})),s.addEventListener("click",(()=>{const r=e,s=e.querySelector(".noteText").textContent,c=e.querySelector('input[type="date"]').value,n=t.createTaskForm();console.log("current Text",s),console.log("current Date",c),n.querySelector("#taskText").value=s,n.querySelector("#taskDate").value=c,r.replaceWith(n),this.editTaskListener(n,r)})),c.addEventListener("click",(()=>{e.classList.toggle("checked"),this.currentProjectOBJ.getTask(n).toggleDone()}))}static logicUpdateATask(e,t,r){const s=e.querySelector(".noteText").textContent,c=this.currentProjectOBJ.getTask(s);c.setName(t),c.setDate(r)}static editTaskListener(e,r){const s=e.querySelector("#formSubmit"),c=e.querySelector("#formCancel"),n=e.querySelector("#taskDate"),a=e.querySelector("#taskText");s.addEventListener("click",(s=>{if(console.log("zzzz"),s.preventDefault(),""!==n.value&&""!==n.value){const s=n.value,c=a.value;this.logicUpdateATask(r,c,s);const o=t.createTask(s,c);e.replaceWith(o),this.taskListener(o),this.currentProjectOBJ.getTask()}})),console.log(s),c.addEventListener("click",(t=>{t.preventDefault(),e.replaceWith(r),this.taskListener(r)}))}static differentProjectSelected(e){if(document.querySelector(".addTaskForm")){console.log("exists");const e=document.querySelector(".addTaskForm");console.log(e),e.querySelector("#formCancel").click()}console.log(n.getAProject(e)),this.currentProjectOBJ=n.getAProject(e),this.updateMainDivProject(e)}static updateMainDivProject(e){document.querySelector(".main").dataset.currentProject=e,console.log(this.currentProjectOBJ.getTasks()),document.querySelectorAll("div.task").forEach((e=>{e.remove()})),this.currentProjectOBJ.getTasks().forEach((e=>{console.log("A task",e);const r=document.querySelector(".addTask"),s=t.createTask(e.getDate(),e.getName());!0===e.done&&s.classList.toggle("checked"),this.taskListener(s),r.before(s),this.addTaskListener()}))}static addCurrentTasks(){}static formTaskListener(){const e=document.querySelector("#formSubmit"),r=document.querySelector("#formCancel"),c=document.querySelector("#taskDate"),n=document.querySelector(".addTaskForm"),a=document.querySelector("#taskText");e.addEventListener("click",(e=>{if(console.log("zzzz"),e.preventDefault(),""!==c.value&&""!==c.value){const e=c.value,r=a.value;n.replaceWith(t.createAddTask());const o=document.querySelector(".addTask"),d=t.createTask(e,r);this.taskListener(d),o.before(d),this.addTaskListener(),this.currentProjectOBJ.addTask(new s(r,e))}})),console.log(e),r.addEventListener("click",(e=>{e.preventDefault(),n.replaceWith(t.createAddTask()),this.addTaskListener()}))}static addTaskListener(){const e=document.querySelector(".addTask");e.addEventListener("click",(r=>{if(r.preventDefault(),null==document.querySelector(".addTaskForm")){const r=t.createTaskForm();r.querySelector("input#taskDate").focus(),e.replaceWith(r),this.formTaskListener()}}))}}a.loadPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQzFDdUYsRUFBV3RILGlCQUFpQixTQUFVQyxJQUVwQyxHQURBQSxFQUFFQyxpQkFDNEMsTUFBMUNYLFNBQVN3QyxjQUFjLGdCQUF5QixDQUNsRCxNQUFNd0YsRUFBY3hHLEVBQWM2RSxpQkFDakIyQixFQUFZeEYsY0FBYyxrQkFDbEN1QyxRQUNUZ0QsRUFBVy9DLFlBQVlnRCxHQUV2QnBGLEtBQUtxRixrQkFDUCxJQUVKLEVDNVNGNUQsRUFBYTZELFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL25hdmJhci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL21haW5Db250ZW50LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy90b2RvTGlzdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3VpQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgVUlDb250cm9sbGVyIGZyb20gXCIuL3VpQ29udHJvbGxlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYXZiYXIge1xuICBzdGF0aWMgbG9hZEFkZFByb2plY3QoKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlQnV0dG9uKHN5bWJvbCwgdGV4dCkge1xuICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgIHNwYW4uY2xhc3NMaXN0ID0gXCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkXCI7XG4gICAgICBzcGFuLnRleHRDb250ZW50ID0gc3ltYm9sO1xuXG4gICAgICBjb25zdCBidXR0b25UZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG5cbiAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25UZXh0KTtcbiAgICAgIGJ1dHRvbi5pZCA9IGBmb3JtJHt0ZXh0fWA7XG5cbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0ZXN0XCIpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gICAgLy8gY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHNBZGRlclwiKTtcbiAgICAvLyBhZGRQcm9qZWN0LnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgIGNvbnN0IGZvcm1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgICBmb3JtRGl2LmlkID0gXCJhZGRQcm9qZWN0Rm9ybVwiO1xuXG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwicHJvamVjdE5hbWVcIik7XG4gICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJOYW1lOlwiO1xuXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInByb2plY3ROYW1lXCIpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdE5hbWVcIik7XG4gICAgaW5wdXQucmVxdWlyZWQgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKGlucHV0KTtcblxuICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYnV0dG9uRGl2LmNsYXNzTGlzdCA9IFwiYnV0dG9uc1wiO1xuXG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKGNyZWF0ZUJ1dHRvbihcImRvbmVcIiwgXCJTdWJtaXRcIikpO1xuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oXCJjYW5jZWxcIiwgXCJDYW5jZWxcIikpO1xuXG4gICAgZm9ybURpdi5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgZm9ybURpdi5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgZm9ybURpdi5hcHBlbmRDaGlsZChidXR0b25EaXYpO1xuXG4gICAgLy8gbGV0O1xuICAgIHJldHVybiBmb3JtRGl2O1xuICB9XG5cbiAgc3RhdGljIHJldHVyblByb2plY3RJdGVtKG5hbWUpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBwcm9qZWN0LmlkID0gXCJwcm9qZWN0SXRlbVwiO1xuICAgIHJldHVybiBwcm9qZWN0O1xuICB9XG5cbiAgc3RhdGljIHJldHVybkFkZFByb2plY3RCVE4oKSB7XG4gICAgY29uc3QgYWRkUHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYWRkUHJvamVjdC50ZXh0Q29udGVudCA9IFwiKyBBZGQgcHJvamVjdFwiO1xuICAgIGFkZFByb2plY3QuaWQgPSBcInByb2plY3RBZGRlclwiO1xuICAgIC8vIGFkZFByb2plY3QudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIC8vIGFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAvLyAgIGFkZFByb2plY3QucmVwbGFjZVdpdGgodGhpcy5sb2FkQWRkUHJvamVjdCgpKTtcbiAgICAvLyAgIC8vIFVJQ29udHJvbGxlci5hZGRQcm9qZWN0QlROLmZvcm1CVE5TKCk7XG4gICAgLy8gICAvLyBhZGRQcm9qZWN0RE9NKCk7XG4gICAgLy8gfSk7XG4gICAgcmV0dXJuIGFkZFByb2plY3Q7XG4gIH1cbn1cbiIsImltcG9ydCB7IGZvcm1hdFJlbGF0aXZlIH0gZnJvbSBcImRhdGUtZm5zXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIG1haW5Db250ZW50VUkge1xuICBzdGF0aWMgY3JlYXRlVGFzayhkYXRlVHh0LCB0ZXh0KSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0Rpdi5jbGFzc0xpc3QgPSBcInRhc2tcIjtcblxuICAgIGNvbnN0IHRhc2tJbmZvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrSW5mb0Rpdi5jbGFzc0xpc3QgPSBcInRhc2tJbmZvXCI7XG5cbiAgICBjb25zdCBjaGVja0JveElucHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY2hlY2tCb3hJbnB0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICBjaGVja0JveElucHQuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImZpbmlzaGVkVGFza1wiKTtcbiAgICBjaGVja0JveElucHQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJmaW5pc2hlZFRhc2tcIik7XG5cbiAgICBjb25zdCBkYXRlSW5wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBkYXRlSW5wdC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICBkYXRlSW5wdC52YWx1ZSA9IGRhdGVUeHQ7XG4gICAgZGF0ZUlucHQucmVhZE9ubHkgPSB0cnVlO1xuXG4gICAgY29uc3QgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRleHROb2RlLmNsYXNzTGlzdCA9IFwibm90ZVRleHRcIjtcbiAgICB0ZXh0Tm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICB0YXNrSW5mb0Rpdi5hcHBlbmRDaGlsZChjaGVja0JveElucHQpO1xuICAgIHRhc2tJbmZvRGl2LmFwcGVuZENoaWxkKGRhdGVJbnB0KTtcbiAgICB0YXNrSW5mb0Rpdi5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG5cbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tJbmZvRGl2KTtcblxuICAgIGNvbnN0IGZ1bmN0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBmdW5jdGlvbkRpdi5jbGFzc0xpc3QgPSBcImZ1bmN0aW9uc1wiO1xuXG4gICAgY29uc3Qgc3BhbkVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBzcGFuRWRpdC5jbGFzc0xpc3QgPSBcIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZWRpdFwiO1xuICAgIHNwYW5FZGl0LnRleHRDb250ZW50ID0gXCJlZGl0XCI7XG4gICAgY29uc3Qgc3BhbkRlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHNwYW5EZWxldGUudGV4dENvbnRlbnQgPSBcImRlbGV0ZVwiO1xuICAgIHNwYW5EZWxldGUuY2xhc3NMaXN0ID0gXCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGRlbGV0ZVwiO1xuXG4gICAgZnVuY3Rpb25EaXYuYXBwZW5kQ2hpbGQoc3BhbkVkaXQpO1xuICAgIGZ1bmN0aW9uRGl2LmFwcGVuZENoaWxkKHNwYW5EZWxldGUpO1xuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQoZnVuY3Rpb25EaXYpO1xuXG4gICAgcmV0dXJuIHRhc2tEaXY7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQWRkVGFzaygpIHtcbiAgICBjb25zdCBhZGRUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhZGRUYXNrRGl2LmNsYXNzTGlzdCA9IFwiYWRkVGFza1wiO1xuICAgIGFkZFRhc2tEaXYudGV4dENvbnRlbnQgPSBcIisgQWRkIFRhc2tcIjtcbiAgICByZXR1cm4gYWRkVGFza0RpdjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVUYXNrRm9ybSgpIHtcbiAgICAvLyBDaGVhdGluZz8geWVzLiBUaXJlZD8geWVzLlxuICAgIGNvbnN0IGFkZFRhc2tGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhZGRUYXNrRm9ybS5jbGFzc0xpc3QgPSBcImFkZFRhc2tGb3JtXCI7XG5cbiAgICBjb25zdCBhbGxIVE1MID0gYFxuICAgIDxmb3JtIGFjdGlvbj1cIlwiPlxuICAgICAgPGRpdj5cbiAgICAgICAgPGxhYmVsIGZvcj1cImRhdGVcIj5EYXRlOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIG5hbWU9XCJ0YXNrRGF0ZVwiIGlkPVwidGFza0RhdGVcIiAvPlxuICAgICAgICA8bGFiZWwgZm9yPVwiVGFza1wiPlRhc2s6PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInRhc2tUZXh0XCIgaWQ9XCJ0YXNrVGV4dFwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrRm9ybUJ1dHRvbnNcIj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImZvcm1TdWJtaXRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRcIj5kb25lPC9zcGFuPlN1Ym1pdFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImZvcm1DYW5jZWxcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRcIj5jYW5jZWw8L3NwYW4+Q2FuY2VsXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9mb3JtPlxuICBgO1xuXG4gICAgYWRkVGFza0Zvcm0uaW5uZXJIVE1MID0gYWxsSFRNTDtcblxuICAgIGNvbnN0IHN1Ym1pdEJUTiA9IGFkZFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVN1Ym1pdFwiKTtcbiAgICBjb25zdCBjYW5jZWxCVE4gPSBhZGRUYXNrRm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1DYW5jZWxcIik7XG5cbiAgICBzdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICBjYW5jZWxCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFkZFRhc2tGb3JtO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0IHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50YXNrcyA9IFtdO1xuICB9XG5cbiAgc2V0TmFtZShuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuXG4gIGdldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgfVxuXG4gIGdldFRhc2tzKCkge1xuICAgIHJldHVybiB0aGlzLnRhc2tzO1xuICB9XG5cbiAgZ2V0VGFzayh0YXNrTmFtZSkge1xuICAgIHJldHVybiB0aGlzLnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suZ2V0TmFtZSgpID09PSB0YXNrTmFtZSk7XG4gIH1cblxuICByZW1vdmVUYXNrKHRhc2tOYW1lKSB7XG4gICAgdGhpcy50YXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmdldE5hbWUoKSAhPT0gdGFza05hbWUpO1xuICAgIHJldHVybiB0aGlzLnRhc2tzO1xuICB9XG5cbiAgYWRkVGFzayh0YXNrKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3MucHVzaCh0YXNrKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFzayB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGRhdGUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgLy8gdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICB9XG5cbiAgc2V0RGF0ZShkYXRlKSB7XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgfVxuXG4gIHRvZ2dsZURvbmUoKSB7XG4gICAgdGhpcy5kb25lID0gIXRoaXMuZG9uZTtcbiAgfVxuXG4gIGdldERhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZTtcbiAgfVxuXG4gIHNldE5hbWUobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cblxuICBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cblxuICAvLyBzZXRQcmlvcml0eShwcmlvcml0eSkge1xuICAvLyAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgLy8gfVxuXG4gIC8vIGdldFByaW9yaXR5KCkge1xuICAvLyAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xuICAvLyB9XG59XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5cbmNsYXNzIFRvZG9MaXN0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChcIm1haW5cIikpO1xuICB9XG5cbiAgZ2V0UHJvamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHM7XG4gIH1cblxuICBnZXRQcm9qZWN0c05vdE1haW4oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHMuZmlsdGVyKChhUHJvamVjdCkgPT4gYVByb2plY3QuZ2V0TmFtZSgpICE9PSBcIm1haW5cIik7XG4gIH1cblxuICAvLyBnZXRQcm9qZWN0KG5hbWUpIHtcbiAgLy8gICB0aGlzLnByb2plY3RzLmZvckVhY2goKGFQcm9qZWN0KSA9PiB7XG4gIC8vICAgICBpZiAoYVByb2plY3QubmFtZSA9PT0gbmFtZSkge1xuICAvLyAgICAgICByZXR1cm4gYVByb2plY3Q7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICBnZXRBUHJvamVjdChuYW1lKSB7XG4gICAgLy8gY29uc29sZS5sb2cob2JqZWN0KTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2plY3RzWzBdLmdldE5hbWUoKSk7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5nZXROYW1lKCkgPT09IG5hbWUpO1xuICB9XG5cbiAgYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChgJHtwcm9qZWN0fWApKTtcbiAgfVxufVxuXG5jb25zdCBhVG9kb0xpc3QgPSBuZXcgVG9kb0xpc3QoKTtcbmFUb2RvTGlzdC5hZGRQcm9qZWN0KFwidGVzdFwiKTtcbmFUb2RvTGlzdC5nZXRBUHJvamVjdChcInRlc3RcIikuYWRkVGFzayhuZXcgVGFzayhcIkRvIGhvbWV3b3JrXCIsIFwiMjAyMy0wMS0xOVwiKSk7XG5hVG9kb0xpc3QuZ2V0QVByb2plY3QoXCJtYWluXCIpLmFkZFRhc2sobmV3IFRhc2soXCJnZXQgcml6elwiLCBcIjIwMjMtMDEtMTlcIikpO1xuYVRvZG9MaXN0XG4gIC5nZXRBUHJvamVjdChcIm1haW5cIilcbiAgLmFkZFRhc2sobmV3IFRhc2soXCJHbyByb2NrIGNsaW1iaW5nXCIsIFwiMjAyNC0wMi0yMVwiKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFUb2RvTGlzdDtcbiIsImltcG9ydCBOYXZiYXIgZnJvbSBcIi4vbmF2YmFyXCI7XG5pbXBvcnQgbWFpbkNvbnRlbnRVSSBmcm9tIFwiLi9tYWluQ29udGVudFwiO1xuaW1wb3J0IGFUb2RvTGlzdCBmcm9tIFwiLi90b2RvTGlzdFwiO1xuaW1wb3J0IFRhc2sgZnJvbSBcIi4vdGFza1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSUNvbnRyb2xsZXIge1xuICBzdGF0aWMgbG9hZFBhZ2UoKSB7XG4gICAgdGhpcy5hZGRQcm9qZWN0TGlzdGVuZXIoKTtcbiAgICB0aGlzLnByb2plY3RMaXN0ZW5lcigpO1xuICAgIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgdGhpcy5hZGRDdXJyZW50UHJvamVjdHMoKTtcbiAgICB0aGlzLmRpZmZlcmVudFByb2plY3RTZWxlY3RlZChcIm1haW5cIik7XG4gICAgLy8gY29uc3QgYm9keURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgIC8vIGJvZHlEaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXIoKSk7XG4gICAgLy8gYm9keURpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUZvb3RlcigpKTtcbiAgICAvLyBib2R5RGl2LmFwcGVuZENoaWxkKE5hdmJhci5sb2FkTmF2KCkpO1xuICAgIC8vIGJvZHlEaXYuYXBwZW5kQ2hpbGQobWFpbkNvbnRlbnQuY3JlYXRlTWFpbigpKTtcbiAgfVxuXG4gIHN0YXRpYyBjdXJyZW50UHJvamVjdE9CSiA9IGFUb2RvTGlzdC5nZXRBUHJvamVjdChcIm1haW5cIik7XG5cbiAgc3RhdGljIGNyZWF0ZUhlYWRlcigpIHtcbiAgICBjb25zdCBoZWFkZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhlYWRlckRpdi5jbGFzc0xpc3QgPSBcImhlYWRlclwiO1xuICAgIHJldHVybiBoZWFkZXJEaXY7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlRm9vdGVyKCkge1xuICAgIGNvbnN0IGZvb3RlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZm9vdGVyRGl2LmNsYXNzTGlzdCA9IFwiZm9vdGVyXCI7XG4gICAgcmV0dXJuIGZvb3RlckRpdjtcbiAgfVxuXG4gIHN0YXRpYyBhZGRQcm9qZWN0Rm9ybUJUTlMoKSB7XG4gICAgY29uc3Qgc3VibWl0QlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtU3VibWl0XCIpO1xuICAgIGNvbnN0IGNhbmNlbEJUTiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0TmFtZVwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRQcm9qZWN0Rm9ybVwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdERPTUxvY2F0aW9uKTtcbiAgICBpbnB1dEZpZWxkLmZvY3VzKCk7XG5cbiAgICBzdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAvLyBjb25zdCBsYXN0UHJvamVjdERPTSA9IHByb2plY3RMaXN0RE9NW3Byb2plY3RMaXN0RE9NLmxlbmd0aCAtIDFdO1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoXG4gICAgICAgIGlucHV0RmllbGQudmFsdWUgIT09IFwiXCIgJiZcbiAgICAgICAgYVRvZG9MaXN0LmdldEFQcm9qZWN0KGlucHV0RmllbGQudmFsdWUpID09IG51bGxcbiAgICAgICkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhpbnB1dEZpZWxkLnZhbHVlKTtcbiAgICAgICAgaW5wdXRGaWVsZC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoTmF2YmFyLnJldHVybkFkZFByb2plY3RCVE4oKSk7XG4gICAgICAgIHRoaXMuYWRkUHJvamVjdExpc3RlbmVyKCk7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdExpc3RET01Mb2NhdGlvbiA9XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdiNwcm9qZWN0QWRkZXJcIik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RMaXN0RE9NTG9jYXRpb24pO1xuXG4gICAgICAgIGNvbnN0IGFQcm9qZWN0SXRlbSA9IE5hdmJhci5yZXR1cm5Qcm9qZWN0SXRlbShpbnB1dEZpZWxkLnZhbHVlKTtcbiAgICAgICAgcHJvamVjdExpc3RET01Mb2NhdGlvbi5iZWZvcmUoYVByb2plY3RJdGVtKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhhUHJvamVjdEl0ZW0pO1xuICAgICAgICAvLyB0aGlzLnByb2plY3RMaXN0ZW5lcigpO1xuXG4gICAgICAgIGFUb2RvTGlzdC5hZGRQcm9qZWN0KGlucHV0RmllbGQudmFsdWUpO1xuXG4gICAgICAgIGFQcm9qZWN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwid29ya3NcIik7XG4gICAgICAgICAgdGhpcy5kaWZmZXJlbnRQcm9qZWN0U2VsZWN0ZWQoaW5wdXRGaWVsZC52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2FuY2VsQlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc29sZS5sb2coXCJ0ZXN0XCIpO1xuXG4gICAgICBmb3JtLnJlcGxhY2VXaXRoKE5hdmJhci5yZXR1cm5BZGRQcm9qZWN0QlROKCkpO1xuICAgICAgdGhpcy5hZGRQcm9qZWN0TGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhZGRDdXJyZW50UHJvamVjdHMoKSB7XG4gICAgY29uc3QgY3VycmVudFByb2plY3RzID0gYVRvZG9MaXN0LmdldFByb2plY3RzTm90TWFpbigpO1xuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRQcm9qZWN0cyk7XG5cbiAgICBjb25zdCBwcm9qZWN0TGlzdERPTUxvY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdiNwcm9qZWN0QWRkZXJcIik7XG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdExpc3RET01Mb2NhdGlvbik7XG5cbiAgICBjdXJyZW50UHJvamVjdHMuZm9yRWFjaCgoYVByb2plY3QpID0+IHtcbiAgICAgIGNvbnN0IGFQcm9qZWN0SXRlbSA9IE5hdmJhci5yZXR1cm5Qcm9qZWN0SXRlbShhUHJvamVjdC5nZXROYW1lKCkpO1xuICAgICAgcHJvamVjdExpc3RET01Mb2NhdGlvbi5iZWZvcmUoYVByb2plY3RJdGVtKTtcbiAgICAgIGFQcm9qZWN0SXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIndvcmtzXCIpO1xuICAgICAgICB0aGlzLmRpZmZlcmVudFByb2plY3RTZWxlY3RlZChhUHJvamVjdC5nZXROYW1lKCkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgcHJvamVjdExpc3RlbmVyKCkge1xuICAgIC8vIGNvbnN0IGFsbFByb2plY3RzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXYjcHJvamVjdEl0ZW1cIik7XG5cbiAgICBjb25zdCBtYWluUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJpbWFyeSA+IGRpdjpudGgtY2hpbGQoMSlcIik7XG5cbiAgICBtYWluUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYVRvZG9MaXN0LmdldEFQcm9qZWN0KFwibWFpblwiKSk7XG4gICAgICAvLyB0aGlzLnVwZGF0ZU1haW5EaXZQcm9qZWN0KFwibWFpblwiKTtcbiAgICAgIHRoaXMuZGlmZmVyZW50UHJvamVjdFNlbGVjdGVkKFwibWFpblwiKTtcbiAgICB9KTtcblxuICAgIC8vIGFsbFByb2plY3RzTGlzdC5mb3JFYWNoKChhUHJvamVjdERPTSkgPT4ge1xuICAgIC8vICAgYVByb2plY3RET00uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAvLyAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBhUHJvamVjdERPTS50ZXh0Q29udGVudDtcbiAgICAvLyAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdE5hbWUpO1xuXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGFUb2RvTGlzdC5nZXRBUHJvamVjdChwcm9qZWN0TmFtZSkpO1xuICAgIC8vICAgfSk7XG4gICAgLy8gfSk7XG4gIH1cblxuICBzdGF0aWMgYWRkUHJvamVjdExpc3RlbmVyKCkge1xuICAgIGNvbnN0IGFkZFByb2plY3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RBZGRlclwiKTtcbiAgICBhZGRQcm9qZWN0RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBhZGRQcm9qZWN0RE9NLnJlcGxhY2VXaXRoKE5hdmJhci5sb2FkQWRkUHJvamVjdCgpKTtcbiAgICAgIHRoaXMuYWRkUHJvamVjdEZvcm1CVE5TKCk7XG4gICAgICAvLyBhZGRQcm9qZWN0RE9NKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgdGFza0xpc3RlbmVyKHRhc2tEaXYpIHtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlXCIpO1xuICAgIGNvbnN0IGVkaXRCdXR0b24gPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdFwiKTtcbiAgICBjb25zdCBjaGVja2JveCA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcihcIiNmaW5pc2hlZFRhc2tcIik7XG4gICAgY29uc3QgY3VycmVudFRleHQyID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKFwiLm5vdGVUZXh0XCIpLnRleHRDb250ZW50O1xuXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0YXNrRGl2LnJlbW92ZSgpO1xuICAgICAgdGhpcy5jdXJyZW50UHJvamVjdE9CSi5yZW1vdmVUYXNrKGN1cnJlbnRUZXh0Mik7XG4gICAgfSk7XG5cbiAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gdGFza0RpdjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnQucXVlcnlTZWxlY3RvcihcIi5ub3RlVGV4dFwiKSk7XG4gICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcihcIi5ub3RlVGV4dFwiKS50ZXh0Q29udGVudDtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKGBpbnB1dFt0eXBlPVwiZGF0ZVwiXWApLnZhbHVlO1xuICAgICAgY29uc3QgZWRpdFRhc2tGb3JtID0gbWFpbkNvbnRlbnRVSS5jcmVhdGVUYXNrRm9ybSgpO1xuXG4gICAgICBjb25zb2xlLmxvZyhcImN1cnJlbnQgVGV4dFwiLCBjdXJyZW50VGV4dCk7XG4gICAgICBjb25zb2xlLmxvZyhcImN1cnJlbnQgRGF0ZVwiLCBjdXJyZW50RGF0ZSk7XG5cbiAgICAgIGVkaXRUYXNrRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUZXh0XCIpLnZhbHVlID0gY3VycmVudFRleHQ7XG4gICAgICBlZGl0VGFza0Zvcm0ucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKS52YWx1ZSA9IGN1cnJlbnREYXRlO1xuXG4gICAgICAvLyBlZGl0VGFza0Zvcm0ucXVlcnlTZWxlY3RvcigpO1xuXG4gICAgICBjdXJyZW50LnJlcGxhY2VXaXRoKGVkaXRUYXNrRm9ybSk7XG4gICAgICB0aGlzLmVkaXRUYXNrTGlzdGVuZXIoZWRpdFRhc2tGb3JtLCBjdXJyZW50KTtcbiAgICB9KTtcblxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0YXNrRGl2LmNsYXNzTGlzdC50b2dnbGUoXCJjaGVja2VkXCIpO1xuICAgICAgdGhpcy5jdXJyZW50UHJvamVjdE9CSi5nZXRUYXNrKGN1cnJlbnRUZXh0MikudG9nZ2xlRG9uZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gbGV0O1xuICB9XG5cbiAgc3RhdGljIGxvZ2ljVXBkYXRlQVRhc2soY3VycmVudERPTSwgbmV3TmFtZSwgbmV3RGF0ZSkge1xuICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gY3VycmVudERPTS5xdWVyeVNlbGVjdG9yKFwiLm5vdGVUZXh0XCIpLnRleHRDb250ZW50O1xuICAgIC8vIGNvbnN0IGN1cnJlbnREYXRlID0gY3VycmVudERPTS5xdWVyeVNlbGVjdG9yKGBpbnB1dFt0eXBlPVwiZGF0ZVwiXWApLnZhbHVlO1xuXG4gICAgY29uc3QgY3VycmVudFRhc2sgPSB0aGlzLmN1cnJlbnRQcm9qZWN0T0JKLmdldFRhc2soY3VycmVudFRleHQpO1xuICAgIC8vIHRoaXMuY3VycmVudFByb2plY3RPQkouZ2V0VGFzayhjdXJyZW50VGV4dClcbiAgICBjdXJyZW50VGFzay5zZXROYW1lKG5ld05hbWUpO1xuICAgIGN1cnJlbnRUYXNrLnNldERhdGUobmV3RGF0ZSk7XG4gIH1cblxuICBzdGF0aWMgZWRpdFRhc2tMaXN0ZW5lcihlZGl0Rm9ybSwgY3VycmVudCkge1xuICAgIGNvbnN0IGZvcm1TdWJtaXRCVE4gPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1TdWJtaXRcIik7XG4gICAgY29uc3QgZm9ybUNhbmNlbEJUTiA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBmb3JtRGF0ZUlucHV0ID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKTtcbiAgICAvLyBjb25zdCBmb3JtID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrRm9ybVwiKTtcblxuICAgIGNvbnN0IGZvcm1UZXh0SW5wdXQgPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUZXh0XCIpO1xuICAgIGZvcm1TdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcInp6enpcIik7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZm9ybURhdGVJbnB1dC52YWx1ZSAhPT0gXCJcIiAmJiBmb3JtRGF0ZUlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBmb3JtRGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybVRleHRJbnB1dC52YWx1ZTtcblxuICAgICAgICAvLyBlZGl0Rm9ybS5yZXBsYWNlV2l0aChtYWluQ29udGVudFVJLmNyZWF0ZVRhc2soKSk7XG4gICAgICAgIC8vIGNvbnN0IGFkZFRhc2sgPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgICAgIHRoaXMubG9naWNVcGRhdGVBVGFzayhjdXJyZW50LCB0ZXh0LCBkYXRlKTtcbiAgICAgICAgY29uc3QgdGFzayA9IG1haW5Db250ZW50VUkuY3JlYXRlVGFzayhkYXRlLCB0ZXh0KTtcbiAgICAgICAgZWRpdEZvcm0ucmVwbGFjZVdpdGgodGFzayk7XG4gICAgICAgIHRoaXMudGFza0xpc3RlbmVyKHRhc2spO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3RPQkouZ2V0VGFzaygpO1xuICAgICAgICAvLyB0YXNrQlROU1xuXG4gICAgICAgIC8vIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coZm9ybVN1Ym1pdEJUTik7XG4gICAgZm9ybUNhbmNlbEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVkaXRGb3JtLnJlcGxhY2VXaXRoKGN1cnJlbnQpO1xuICAgICAgLy8gdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICAgIHRoaXMudGFza0xpc3RlbmVyKGN1cnJlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGRpZmZlcmVudFByb2plY3RTZWxlY3RlZChwcm9qZWN0TmFtZSkge1xuICAgIC8vIGlmIHRoZSB0YXNrIGZvcm0gaXMgYWN0aXZlIGFuZCBkaWZmZXJlbnQgcHJvamVjdCBzZWxlY3RlZFxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImV4aXN0c1wiKTtcbiAgICAgIGNvbnN0IHRoZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpO1xuICAgICAgY29uc29sZS5sb2codGhlRm9ybSk7XG4gICAgICB0aGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKS5jbGljaygpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhhVG9kb0xpc3QuZ2V0QVByb2plY3QocHJvamVjdE5hbWUpKTtcbiAgICB0aGlzLmN1cnJlbnRQcm9qZWN0T0JKID0gYVRvZG9MaXN0LmdldEFQcm9qZWN0KHByb2plY3ROYW1lKTtcbiAgICB0aGlzLnVwZGF0ZU1haW5EaXZQcm9qZWN0KHByb2plY3ROYW1lKTtcblxuICAgIC8vIGN1cnJlbnRQcm9qZWN0T0JKID1cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVNYWluRGl2UHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgIGNvbnN0IG1haW5ET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIik7XG4gICAgbWFpbkRPTS5kYXRhc2V0LmN1cnJlbnRQcm9qZWN0ID0gcHJvamVjdE5hbWU7XG4gICAgY29uc29sZS5sb2codGhpcy5jdXJyZW50UHJvamVjdE9CSi5nZXRUYXNrcygpKTtcbiAgICBjb25zdCBvbGRUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXYudGFza1wiKTtcbiAgICBvbGRUYXNrcy5mb3JFYWNoKChhU2luZ3VsYXJUYXNrKSA9PiB7XG4gICAgICBhU2luZ3VsYXJUYXNrLnJlbW92ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jdXJyZW50UHJvamVjdE9CSi5nZXRUYXNrcygpLmZvckVhY2goKGFUYXNrKSA9PiB7XG4gICAgICAvLyBvbGRUYXNrcy5yZW1vdmUoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQSB0YXNrXCIsIGFUYXNrKTtcbiAgICAgIGNvbnN0IGFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgICBjb25zdCB0YXNrRE9NID0gbWFpbkNvbnRlbnRVSS5jcmVhdGVUYXNrKFxuICAgICAgICBhVGFzay5nZXREYXRlKCksXG4gICAgICAgIGFUYXNrLmdldE5hbWUoKVxuICAgICAgKTtcblxuICAgICAgaWYgKGFUYXNrLmRvbmUgPT09IHRydWUpIHtcbiAgICAgICAgdGFza0RPTS5jbGFzc0xpc3QudG9nZ2xlKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgLy8gdGFza0Rpdi5jbGFzc0xpc3QudG9nZ2xlKFwiY2hlY2tlZFwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50YXNrTGlzdGVuZXIodGFza0RPTSk7XG4gICAgICBhZGRUYXNrLmJlZm9yZSh0YXNrRE9NKTtcblxuICAgICAgdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhZGRDdXJyZW50VGFza3MoKSB7fVxuXG4gIHN0YXRpYyBmb3JtVGFza0xpc3RlbmVyKCkge1xuICAgIGNvbnN0IGZvcm1TdWJtaXRCVE4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1TdWJtaXRcIik7XG4gICAgY29uc3QgZm9ybUNhbmNlbEJUTiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBmb3JtRGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrRm9ybVwiKTtcblxuICAgIGNvbnN0IGZvcm1UZXh0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUZXh0XCIpO1xuICAgIGZvcm1TdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcInp6enpcIik7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZm9ybURhdGVJbnB1dC52YWx1ZSAhPT0gXCJcIiAmJiBmb3JtRGF0ZUlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBmb3JtRGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybVRleHRJbnB1dC52YWx1ZTtcblxuICAgICAgICBmb3JtLnJlcGxhY2VXaXRoKG1haW5Db250ZW50VUkuY3JlYXRlQWRkVGFzaygpKTtcbiAgICAgICAgY29uc3QgYWRkVGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza1wiKTtcbiAgICAgICAgY29uc3QgdGFzayA9IG1haW5Db250ZW50VUkuY3JlYXRlVGFzayhkYXRlLCB0ZXh0KTtcblxuICAgICAgICB0aGlzLnRhc2tMaXN0ZW5lcih0YXNrKTtcbiAgICAgICAgYWRkVGFzay5iZWZvcmUodGFzayk7XG5cbiAgICAgICAgdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0T0JKLmFkZFRhc2sobmV3IFRhc2sodGV4dCwgZGF0ZSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGZvcm1TdWJtaXRCVE4pO1xuICAgIGZvcm1DYW5jZWxCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBmb3JtLnJlcGxhY2VXaXRoKG1haW5Db250ZW50VUkuY3JlYXRlQWRkVGFzaygpKTtcbiAgICAgIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYWRkVGFza0xpc3RlbmVyKCkge1xuICAgIGNvbnN0IGFkZFRhc2tET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgYWRkVGFza0RPTS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpID09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdGFza0Zvcm1ET00gPSBtYWluQ29udGVudFVJLmNyZWF0ZVRhc2tGb3JtKCk7XG4gICAgICAgIGNvbnN0IGRhdGVJTlBUID0gdGFza0Zvcm1ET00ucXVlcnlTZWxlY3RvcihcImlucHV0I3Rhc2tEYXRlXCIpO1xuICAgICAgICBkYXRlSU5QVC5mb2N1cygpO1xuICAgICAgICBhZGRUYXNrRE9NLnJlcGxhY2VXaXRoKHRhc2tGb3JtRE9NKTtcbiAgICAgICAgLy8gdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICAgICAgdGhpcy5mb3JtVGFza0xpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBVSUNvbnRyb2xsZXIgZnJvbSBcIi4vbW9kdWxlcy91aUNvbnRyb2xsZXJcIjtcbmltcG9ydCBUb2RvTGlzdCBmcm9tIFwiLi9tb2R1bGVzL3RvZG9MaXN0XCI7XG5cbi8vIGNvbnNvbGUubG9nKGFUb2RvTGlzdC5wcm9qZWN0cyk7XG4vL1xuLy8gY29uc29sZS5sb2coYVRvZG9MaXN0LmdldEFQcm9qZWN0KFwibWFpblwiKSk7XG5cblVJQ29udHJvbGxlci5sb2FkUGFnZSgpO1xuIl0sIm5hbWVzIjpbIk5hdmJhciIsInN0YXRpYyIsImNyZWF0ZUJ1dHRvbiIsInN5bWJvbCIsInRleHQiLCJidXR0b24iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcGFuIiwiY2xhc3NMaXN0IiwidGV4dENvbnRlbnQiLCJidXR0b25UZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsImlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1EaXYiLCJsYWJlbCIsInNldEF0dHJpYnV0ZSIsImlubmVyVGV4dCIsImlucHV0IiwicmVxdWlyZWQiLCJjb25zb2xlIiwibG9nIiwiYnV0dG9uRGl2IiwibmFtZSIsInByb2plY3QiLCJhZGRQcm9qZWN0IiwibWFpbkNvbnRlbnRVSSIsImRhdGVUeHQiLCJ0YXNrRGl2IiwidGFza0luZm9EaXYiLCJjaGVja0JveElucHQiLCJkYXRlSW5wdCIsInZhbHVlIiwicmVhZE9ubHkiLCJ0ZXh0Tm9kZSIsImZ1bmN0aW9uRGl2Iiwic3BhbkVkaXQiLCJzcGFuRGVsZXRlIiwiYWRkVGFza0RpdiIsImFkZFRhc2tGb3JtIiwiaW5uZXJIVE1MIiwic3VibWl0QlROIiwicXVlcnlTZWxlY3RvciIsImNhbmNlbEJUTiIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJ0YXNrcyIsInNldE5hbWUiLCJnZXROYW1lIiwiZ2V0VGFza3MiLCJnZXRUYXNrIiwidGFza05hbWUiLCJmaW5kIiwidGFzayIsInJlbW92ZVRhc2siLCJmaWx0ZXIiLCJhZGRUYXNrIiwicHVzaCIsIlRhc2siLCJkYXRlIiwiZG9uZSIsInNldERhdGUiLCJ0b2dnbGVEb25lIiwiZ2V0RGF0ZSIsImFUb2RvTGlzdCIsInByb2plY3RzIiwiZ2V0UHJvamVjdHMiLCJnZXRQcm9qZWN0c05vdE1haW4iLCJhUHJvamVjdCIsImdldEFQcm9qZWN0IiwiVUlDb250cm9sbGVyIiwiYWRkUHJvamVjdExpc3RlbmVyIiwicHJvamVjdExpc3RlbmVyIiwiYWRkVGFza0xpc3RlbmVyIiwiYWRkQ3VycmVudFByb2plY3RzIiwiZGlmZmVyZW50UHJvamVjdFNlbGVjdGVkIiwiaGVhZGVyRGl2IiwiZm9vdGVyRGl2IiwiaW5wdXRGaWVsZCIsImZvcm0iLCJmb2N1cyIsInJlcGxhY2VXaXRoIiwicmV0dXJuQWRkUHJvamVjdEJUTiIsInByb2plY3RMaXN0RE9NTG9jYXRpb24iLCJhUHJvamVjdEl0ZW0iLCJyZXR1cm5Qcm9qZWN0SXRlbSIsImJlZm9yZSIsImN1cnJlbnRQcm9qZWN0cyIsImZvckVhY2giLCJhZGRQcm9qZWN0RE9NIiwibG9hZEFkZFByb2plY3QiLCJhZGRQcm9qZWN0Rm9ybUJUTlMiLCJkZWxldGVCdXR0b24iLCJlZGl0QnV0dG9uIiwiY2hlY2tib3giLCJjdXJyZW50VGV4dDIiLCJyZW1vdmUiLCJjdXJyZW50UHJvamVjdE9CSiIsImN1cnJlbnQiLCJjdXJyZW50VGV4dCIsImN1cnJlbnREYXRlIiwiZWRpdFRhc2tGb3JtIiwiY3JlYXRlVGFza0Zvcm0iLCJlZGl0VGFza0xpc3RlbmVyIiwidG9nZ2xlIiwiY3VycmVudERPTSIsIm5ld05hbWUiLCJuZXdEYXRlIiwiY3VycmVudFRhc2siLCJlZGl0Rm9ybSIsImZvcm1TdWJtaXRCVE4iLCJmb3JtQ2FuY2VsQlROIiwiZm9ybURhdGVJbnB1dCIsImZvcm1UZXh0SW5wdXQiLCJsb2dpY1VwZGF0ZUFUYXNrIiwiY3JlYXRlVGFzayIsInRhc2tMaXN0ZW5lciIsInByb2plY3ROYW1lIiwidGhlRm9ybSIsImNsaWNrIiwidXBkYXRlTWFpbkRpdlByb2plY3QiLCJkYXRhc2V0IiwiY3VycmVudFByb2plY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYVNpbmd1bGFyVGFzayIsImFUYXNrIiwidGFza0RPTSIsImNyZWF0ZUFkZFRhc2siLCJhZGRUYXNrRE9NIiwidGFza0Zvcm1ET00iLCJmb3JtVGFza0xpc3RlbmVyIiwibG9hZFBhZ2UiXSwic291cmNlUm9vdCI6IiJ9
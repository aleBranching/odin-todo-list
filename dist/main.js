(()=>{"use strict";class e{static loadAddProject(){function e(e,t){const n=document.createElement("button"),c=document.createElement("span");c.classList="material-symbols-outlined",c.textContent=e;const a=document.createTextNode(t);return n.appendChild(c),n.appendChild(a),n.id=`form${t}`,n.addEventListener("click",(e=>{e.preventDefault()})),n}const t=document.createElement("form");t.id="addProjectForm";const n=document.createElement("label");n.setAttribute("for","projectName"),n.innerText="Name:";const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","projectName"),c.setAttribute("id","projectName"),c.required=!0,console.log(c);const a=document.createElement("div");return a.classList="buttons",a.appendChild(e("done","Submit")),a.appendChild(e("cancel","Cancel")),t.appendChild(n),t.appendChild(c),t.appendChild(a),t}static returnProjectItem(e){const t=document.createElement("div");return t.textContent=e,t}static returnAddProjectBTN(){const e=document.createElement("div");return e.textContent="+ Add project",e.id="projectAdder",e}}class t{static createTask(e,t){const n=document.createElement("div");n.classList="task";const c=document.createElement("div");c.classList="taskInfo";const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("name","finishedTask"),a.setAttribute("id","finishedTask");const r=document.createElement("input");r.setAttribute("type","date"),r.value=e,r.readOnly=!0;const s=document.createElement("div");s.classList="noteText",s.textContent=t,c.appendChild(a),c.appendChild(r),c.appendChild(s),n.appendChild(c);const o=document.createElement("div");o.classList="functions";const d=document.createElement("span");d.classList="material-symbols-outlined edit",d.textContent="edit";const l=document.createElement("span");return l.textContent="delete",l.classList="material-symbols-outlined delete",o.appendChild(d),o.appendChild(l),n.appendChild(o),n}static createAddTask(){const e=document.createElement("div");return e.classList="addTask",e.textContent="+ Add Task",e}static createTaskForm(){const e=document.createElement("div");e.classList="addTaskForm",e.innerHTML='\n    <form action="">\n      <div>\n        <label for="date">Date:</label>\n        <input type="date" name="taskDate" id="taskDate" />\n        <label for="Task">Task:</label>\n        <input type="text" name="taskText" id="taskText" />\n      </div>\n      <div class="taskFormButtons">\n        <button id="formSubmit">\n          <span class="material-symbols-outlined">done</span>Submit\n        </button>\n        <button id="formCancel">\n          <span class="material-symbols-outlined">cancel</span>Cancel\n        </button>\n      </div>\n    </form>\n  ';const t=e.querySelector("#formSubmit"),n=e.querySelector("#formCancel");return e.querySelector("input#taskDate").focus(),t.addEventListener("click",(e=>{e.preventDefault()})),n.addEventListener("click",(e=>{e.preventDefault()})),e}}(class{static loadPage(){this.addProjectListener(),this.addTaskListener()}static createHeader(){const e=document.createElement("div");return e.classList="header",e}static createFooter(){const e=document.createElement("div");return e.classList="footer",e}static formBTNS(){const t=document.querySelector("#formSubmit"),n=document.querySelector("#formCancel"),c=document.querySelector("#projectName"),a=document.querySelector("#addProjectForm");c.focus(),t.addEventListener("click",(t=>{if(t.preventDefault(),""!==c.value){console.log(c.value),c.textContent="",a.replaceWith(e.returnAddProjectBTN()),this.addProjectListener();const t=document.querySelector("div#projectAdder");console.log(t),t.before(e.returnProjectItem(c.value))}})),n.addEventListener("click",(t=>{t.preventDefault(),console.log("test"),a.replaceWith(e.returnAddProjectBTN()),this.addProjectListener()}))}static addProjectListener(){const t=document.querySelector("#projectAdder");t.addEventListener("click",(()=>{t.replaceWith(e.loadAddProject()),this.formBTNS()}))}static taskListener(e){const n=e.querySelector(".delete"),c=e.querySelector(".edit"),a=e.querySelector("#finishedTask");n.addEventListener("click",(()=>{e.remove()})),c.addEventListener("click",(()=>{const n=e,c=e.querySelector(".noteText").textContent,a=e.querySelector('input[type="date"]').value,r=t.createTaskForm();console.log("current Text",c),console.log("current Date",a),r.querySelector("#taskText").value=c,r.querySelector("#taskDate").value=a,n.replaceWith(r),this.editTaskListener(r,n)})),a.addEventListener("click",(()=>{e.classList.toggle("checked")}))}static editTaskListener(e,n){const c=e.querySelector("#formSubmit"),a=e.querySelector("#formCancel"),r=e.querySelector("#taskDate"),s=e.querySelector("#taskText");c.addEventListener("click",(n=>{if(console.log("zzzz"),n.preventDefault(),""!==r.value&&""!==r.value){const n=r.value,c=s.value,a=t.createTask(n,c);e.replaceWith(a),this.taskListener(a)}})),console.log(c),a.addEventListener("click",(t=>{t.preventDefault(),e.replaceWith(n),this.taskListener(n)}))}static formTaskListener(){const e=document.querySelector("#formSubmit"),n=document.querySelector("#formCancel"),c=document.querySelector("#taskDate"),a=document.querySelector(".addTaskForm"),r=document.querySelector("#taskText");e.addEventListener("click",(e=>{if(console.log("zzzz"),e.preventDefault(),""!==c.value&&""!==c.value){const e=c.value,n=r.value;a.replaceWith(t.createAddTask());const s=document.querySelector(".addTask"),o=t.createTask(e,n);this.taskListener(o),s.before(o),this.addTaskListener()}})),console.log(e),n.addEventListener("click",(e=>{e.preventDefault(),a.replaceWith(t.createAddTask()),this.addTaskListener()}))}static addTaskListener(){const e=document.querySelector(".addTask");e.addEventListener("click",(n=>{if(n.preventDefault(),null==document.querySelector(".addTaskForm")){const n=t.createTaskForm();n.querySelector("input#taskDate").focus(),e.replaceWith(n),this.formTaskListener()}}))}}).loadPage(),console.log("test");const n=document.querySelector(".header");console.log(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixFQUFhaEYsU0FBU3dDLGNBQWMsWUFDMUN3QyxFQUFXdkUsaUJBQWlCLFNBQVVDLElBRXBDLEdBREFBLEVBQUVDLGlCQUM0QyxNQUExQ1gsU0FBU3dDLGNBQWMsZ0JBQXlCLENBQ2xELE1BQU15QyxFQUFjekQsRUFBYzBDLGlCQUNqQmUsRUFBWXpDLGNBQWMsa0JBQ2xDRSxRQUNUc0MsRUFBVzlCLFlBQVkrQixHQUN2QnRDLEtBQUt1QyxrQkFDUCxJQUVKLElDdkxXQyxXQUViakUsUUFBUUMsSUFBSSxRQUVaLE1BQU1pRSxFQUFPcEYsU0FBU3dDLGNBQWMsV0FFcEN0QixRQUFRQyxJQUFJaUUsRSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvbmF2YmFyLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvbWFpbkNvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy91aUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IFVJQ29udHJvbGxlciBmcm9tIFwiLi91aUNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2YmFyIHtcbiAgc3RhdGljIGxvYWRBZGRQcm9qZWN0KCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihzeW1ib2wsIHRleHQpIHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBzcGFuLmNsYXNzTGlzdCA9IFwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiO1xuICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHN5bWJvbDtcblxuICAgICAgY29uc3QgYnV0dG9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuXG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoYnV0dG9uVGV4dCk7XG4gICAgICBidXR0b24uaWQgPSBgZm9ybSR7dGV4dH1gO1xuXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIGNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzQWRkZXJcIik7XG4gICAgLy8gYWRkUHJvamVjdC50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICBjb25zdCBmb3JtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgZm9ybURpdi5pZCA9IFwiYWRkUHJvamVjdEZvcm1cIjtcblxuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInByb2plY3ROYW1lXCIpO1xuICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiTmFtZTpcIjtcblxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJwcm9qZWN0TmFtZVwiKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3ROYW1lXCIpO1xuICAgIGlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhpbnB1dCk7XG5cbiAgICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJ1dHRvbkRpdi5jbGFzc0xpc3QgPSBcImJ1dHRvbnNcIjtcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oXCJkb25lXCIsIFwiU3VibWl0XCIpKTtcbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKFwiY2FuY2VsXCIsIFwiQ2FuY2VsXCIpKTtcblxuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQoYnV0dG9uRGl2KTtcblxuICAgIC8vIGxldDtcbiAgICByZXR1cm4gZm9ybURpdjtcbiAgfVxuXG4gIHN0YXRpYyByZXR1cm5Qcm9qZWN0SXRlbShuYW1lKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgcmV0dXJuIHByb2plY3Q7XG4gIH1cblxuICBzdGF0aWMgcmV0dXJuQWRkUHJvamVjdEJUTigpIHtcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhZGRQcm9qZWN0LnRleHRDb250ZW50ID0gXCIrIEFkZCBwcm9qZWN0XCI7XG4gICAgYWRkUHJvamVjdC5pZCA9IFwicHJvamVjdEFkZGVyXCI7XG4gICAgLy8gYWRkUHJvamVjdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgLy8gYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIC8vICAgYWRkUHJvamVjdC5yZXBsYWNlV2l0aCh0aGlzLmxvYWRBZGRQcm9qZWN0KCkpO1xuICAgIC8vICAgLy8gVUlDb250cm9sbGVyLmFkZFByb2plY3RCVE4uZm9ybUJUTlMoKTtcbiAgICAvLyAgIC8vIGFkZFByb2plY3RET00oKTtcbiAgICAvLyB9KTtcbiAgICByZXR1cm4gYWRkUHJvamVjdDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmUgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbWFpbkNvbnRlbnRVSSB7XG4gIHN0YXRpYyBjcmVhdGVUYXNrKGRhdGVUeHQsIHRleHQpIHtcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrRGl2LmNsYXNzTGlzdCA9IFwidGFza1wiO1xuXG4gICAgY29uc3QgdGFza0luZm9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tJbmZvRGl2LmNsYXNzTGlzdCA9IFwidGFza0luZm9cIjtcblxuICAgIGNvbnN0IGNoZWNrQm94SW5wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjaGVja0JveElucHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgIGNoZWNrQm94SW5wdC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZmluaXNoZWRUYXNrXCIpO1xuICAgIGNoZWNrQm94SW5wdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImZpbmlzaGVkVGFza1wiKTtcblxuICAgIGNvbnN0IGRhdGVJbnB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGRhdGVJbnB0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgIGRhdGVJbnB0LnZhbHVlID0gZGF0ZVR4dDtcbiAgICBkYXRlSW5wdC5yZWFkT25seSA9IHRydWU7XG5cbiAgICBjb25zdCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGV4dE5vZGUuY2xhc3NMaXN0ID0gXCJub3RlVGV4dFwiO1xuICAgIHRleHROb2RlLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIHRhc2tJbmZvRGl2LmFwcGVuZENoaWxkKGNoZWNrQm94SW5wdCk7XG4gICAgdGFza0luZm9EaXYuYXBwZW5kQ2hpbGQoZGF0ZUlucHQpO1xuICAgIHRhc2tJbmZvRGl2LmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0luZm9EaXYpO1xuXG4gICAgY29uc3QgZnVuY3Rpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGZ1bmN0aW9uRGl2LmNsYXNzTGlzdCA9IFwiZnVuY3Rpb25zXCI7XG5cbiAgICBjb25zdCBzcGFuRWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHNwYW5FZGl0LmNsYXNzTGlzdCA9IFwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBlZGl0XCI7XG4gICAgc3BhbkVkaXQudGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbiAgICBjb25zdCBzcGFuRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgc3BhbkRlbGV0ZS50ZXh0Q29udGVudCA9IFwiZGVsZXRlXCI7XG4gICAgc3BhbkRlbGV0ZS5jbGFzc0xpc3QgPSBcIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZGVsZXRlXCI7XG5cbiAgICBmdW5jdGlvbkRpdi5hcHBlbmRDaGlsZChzcGFuRWRpdCk7XG4gICAgZnVuY3Rpb25EaXYuYXBwZW5kQ2hpbGQoc3BhbkRlbGV0ZSk7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZChmdW5jdGlvbkRpdik7XG5cbiAgICByZXR1cm4gdGFza0RpdjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVBZGRUYXNrKCkge1xuICAgIGNvbnN0IGFkZFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFkZFRhc2tEaXYuY2xhc3NMaXN0ID0gXCJhZGRUYXNrXCI7XG4gICAgYWRkVGFza0Rpdi50ZXh0Q29udGVudCA9IFwiKyBBZGQgVGFza1wiO1xuICAgIHJldHVybiBhZGRUYXNrRGl2O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZVRhc2tGb3JtKCkge1xuICAgIC8vIENoZWF0aW5nPyB5ZXMuIFRpcmVkPyB5ZXMuXG4gICAgY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFkZFRhc2tGb3JtLmNsYXNzTGlzdCA9IFwiYWRkVGFza0Zvcm1cIjtcblxuICAgIGNvbnN0IGFsbEhUTUwgPSBgXG4gICAgPGZvcm0gYWN0aW9uPVwiXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8bGFiZWwgZm9yPVwiZGF0ZVwiPkRhdGU6PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgbmFtZT1cInRhc2tEYXRlXCIgaWQ9XCJ0YXNrRGF0ZVwiIC8+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJUYXNrXCI+VGFzazo8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidGFza1RleHRcIiBpZD1cInRhc2tUZXh0XCIgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRhc2tGb3JtQnV0dG9uc1wiPlxuICAgICAgICA8YnV0dG9uIGlkPVwiZm9ybVN1Ym1pdFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiPmRvbmU8L3NwYW4+U3VibWl0XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGlkPVwiZm9ybUNhbmNlbFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiPmNhbmNlbDwvc3Bhbj5DYW5jZWxcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Zvcm0+XG4gIGA7XG5cbiAgICBhZGRUYXNrRm9ybS5pbm5lckhUTUwgPSBhbGxIVE1MO1xuXG4gICAgY29uc3Qgc3VibWl0QlROID0gYWRkVGFza0Zvcm0ucXVlcnlTZWxlY3RvcihcIiNmb3JtU3VibWl0XCIpO1xuICAgIGNvbnN0IGNhbmNlbEJUTiA9IGFkZFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBkYXRlSU5QVCA9IGFkZFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dCN0YXNrRGF0ZVwiKTtcbiAgICBkYXRlSU5QVC5mb2N1cygpO1xuXG4gICAgc3VibWl0QlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgY2FuY2VsQlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHJldHVybiBhZGRUYXNrRm9ybTtcbiAgfVxufVxuIiwiaW1wb3J0IE5hdmJhciBmcm9tIFwiLi9uYXZiYXJcIjtcbmltcG9ydCBtYWluQ29udGVudFVJIGZyb20gXCIuL21haW5Db250ZW50XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJQ29udHJvbGxlciB7XG4gIHN0YXRpYyBsb2FkUGFnZSgpIHtcbiAgICB0aGlzLmFkZFByb2plY3RMaXN0ZW5lcigpO1xuICAgIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgLy8gY29uc3QgYm9keURpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgIC8vIGJvZHlEaXYuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVIZWFkZXIoKSk7XG4gICAgLy8gYm9keURpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUZvb3RlcigpKTtcbiAgICAvLyBib2R5RGl2LmFwcGVuZENoaWxkKE5hdmJhci5sb2FkTmF2KCkpO1xuICAgIC8vIGJvZHlEaXYuYXBwZW5kQ2hpbGQobWFpbkNvbnRlbnQuY3JlYXRlTWFpbigpKTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVIZWFkZXIoKSB7XG4gICAgY29uc3QgaGVhZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBoZWFkZXJEaXYuY2xhc3NMaXN0ID0gXCJoZWFkZXJcIjtcbiAgICByZXR1cm4gaGVhZGVyRGl2O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUZvb3RlcigpIHtcbiAgICBjb25zdCBmb290ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGZvb3RlckRpdi5jbGFzc0xpc3QgPSBcImZvb3RlclwiO1xuICAgIHJldHVybiBmb290ZXJEaXY7XG4gIH1cblxuICBzdGF0aWMgZm9ybUJUTlMoKSB7XG4gICAgY29uc3Qgc3VibWl0QlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtU3VibWl0XCIpO1xuICAgIGNvbnN0IGNhbmNlbEJUTiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0TmFtZVwiKTtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRQcm9qZWN0Rm9ybVwiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0TGlzdERPTUxvY2F0aW9uKTtcbiAgICBpbnB1dEZpZWxkLmZvY3VzKCk7XG5cbiAgICBzdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAvLyBjb25zdCBsYXN0UHJvamVjdERPTSA9IHByb2plY3RMaXN0RE9NW3Byb2plY3RMaXN0RE9NLmxlbmd0aCAtIDFdO1xuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoaW5wdXRGaWVsZC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICBjb25zb2xlLmxvZyhpbnB1dEZpZWxkLnZhbHVlKTtcbiAgICAgICAgaW5wdXRGaWVsZC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoTmF2YmFyLnJldHVybkFkZFByb2plY3RCVE4oKSk7XG4gICAgICAgIHRoaXMuYWRkUHJvamVjdExpc3RlbmVyKCk7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdExpc3RET01Mb2NhdGlvbiA9XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdiNwcm9qZWN0QWRkZXJcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RMaXN0RE9NTG9jYXRpb24pO1xuICAgICAgICBwcm9qZWN0TGlzdERPTUxvY2F0aW9uLmJlZm9yZShcbiAgICAgICAgICBOYXZiYXIucmV0dXJuUHJvamVjdEl0ZW0oaW5wdXRGaWVsZC52YWx1ZSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNhbmNlbEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcblxuICAgICAgZm9ybS5yZXBsYWNlV2l0aChOYXZiYXIucmV0dXJuQWRkUHJvamVjdEJUTigpKTtcbiAgICAgIHRoaXMuYWRkUHJvamVjdExpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYWRkUHJvamVjdExpc3RlbmVyKCkge1xuICAgIGNvbnN0IGFkZFByb2plY3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RBZGRlclwiKTtcbiAgICBhZGRQcm9qZWN0RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBhZGRQcm9qZWN0RE9NLnJlcGxhY2VXaXRoKE5hdmJhci5sb2FkQWRkUHJvamVjdCgpKTtcbiAgICAgIHRoaXMuZm9ybUJUTlMoKTtcbiAgICAgIC8vIGFkZFByb2plY3RET00oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyB0YXNrTGlzdGVuZXIodGFza0Rpdikge1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcihcIi5kZWxldGVcIik7XG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcihcIi5lZGl0XCIpO1xuICAgIGNvbnN0IGNoZWNrYm94ID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKFwiI2ZpbmlzaGVkVGFza1wiKTtcblxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGFza0Rpdi5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0YXNrRGl2O1xuICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudC5xdWVyeVNlbGVjdG9yKFwiLm5vdGVUZXh0XCIpKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRUZXh0ID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKFwiLm5vdGVUZXh0XCIpLnRleHRDb250ZW50O1xuICAgICAgY29uc3QgY3VycmVudERhdGUgPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoYGlucHV0W3R5cGU9XCJkYXRlXCJdYCkudmFsdWU7XG4gICAgICBjb25zdCBlZGl0VGFza0Zvcm0gPSBtYWluQ29udGVudFVJLmNyZWF0ZVRhc2tGb3JtKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiY3VycmVudCBUZXh0XCIsIGN1cnJlbnRUZXh0KTtcbiAgICAgIGNvbnNvbGUubG9nKFwiY3VycmVudCBEYXRlXCIsIGN1cnJlbnREYXRlKTtcblxuICAgICAgZWRpdFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1RleHRcIikudmFsdWUgPSBjdXJyZW50VGV4dDtcbiAgICAgIGVkaXRUYXNrRm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpLnZhbHVlID0gY3VycmVudERhdGU7XG5cbiAgICAgIC8vIGVkaXRUYXNrRm9ybS5xdWVyeVNlbGVjdG9yKCk7XG5cbiAgICAgIGN1cnJlbnQucmVwbGFjZVdpdGgoZWRpdFRhc2tGb3JtKTtcbiAgICAgIHRoaXMuZWRpdFRhc2tMaXN0ZW5lcihlZGl0VGFza0Zvcm0sIGN1cnJlbnQpO1xuICAgIH0pO1xuXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LnRvZ2dsZShcImNoZWNrZWRcIik7XG4gICAgfSk7XG5cbiAgICAvLyBsZXQ7XG4gIH1cblxuICBzdGF0aWMgZWRpdFRhc2tMaXN0ZW5lcihlZGl0Rm9ybSwgY3VycmVudCkge1xuICAgIGNvbnN0IGZvcm1TdWJtaXRCVE4gPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1TdWJtaXRcIik7XG4gICAgY29uc3QgZm9ybUNhbmNlbEJUTiA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcbiAgICBjb25zdCBmb3JtRGF0ZUlucHV0ID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKTtcbiAgICAvLyBjb25zdCBmb3JtID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrRm9ybVwiKTtcblxuICAgIGNvbnN0IGZvcm1UZXh0SW5wdXQgPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUZXh0XCIpO1xuICAgIGZvcm1TdWJtaXRCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcInp6enpcIik7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoZm9ybURhdGVJbnB1dC52YWx1ZSAhPT0gXCJcIiAmJiBmb3JtRGF0ZUlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBmb3JtRGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybVRleHRJbnB1dC52YWx1ZTtcblxuICAgICAgICAvLyBlZGl0Rm9ybS5yZXBsYWNlV2l0aChtYWluQ29udGVudFVJLmNyZWF0ZVRhc2soKSk7XG4gICAgICAgIC8vIGNvbnN0IGFkZFRhc2sgPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBtYWluQ29udGVudFVJLmNyZWF0ZVRhc2soZGF0ZSwgdGV4dCk7XG4gICAgICAgIGVkaXRGb3JtLnJlcGxhY2VXaXRoKHRhc2spO1xuICAgICAgICB0aGlzLnRhc2tMaXN0ZW5lcih0YXNrKTtcblxuICAgICAgICAvLyB0YXNrQlROU1xuXG4gICAgICAgIC8vIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coZm9ybVN1Ym1pdEJUTik7XG4gICAgZm9ybUNhbmNlbEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGVkaXRGb3JtLnJlcGxhY2VXaXRoKGN1cnJlbnQpO1xuICAgICAgLy8gdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICAgIHRoaXMudGFza0xpc3RlbmVyKGN1cnJlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGZvcm1UYXNrTGlzdGVuZXIoKSB7XG4gICAgY29uc3QgZm9ybVN1Ym1pdEJUTiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVN1Ym1pdFwiKTtcbiAgICBjb25zdCBmb3JtQ2FuY2VsQlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtQ2FuY2VsXCIpO1xuICAgIGNvbnN0IGZvcm1EYXRlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpO1xuXG4gICAgY29uc3QgZm9ybVRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1RleHRcIik7XG4gICAgZm9ybVN1Ym1pdEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwienp6elwiKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChmb3JtRGF0ZUlucHV0LnZhbHVlICE9PSBcIlwiICYmIGZvcm1EYXRlSW5wdXQudmFsdWUgIT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGZvcm1EYXRlSW5wdXQudmFsdWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtVGV4dElucHV0LnZhbHVlO1xuXG4gICAgICAgIGZvcm0ucmVwbGFjZVdpdGgobWFpbkNvbnRlbnRVSS5jcmVhdGVBZGRUYXNrKCkpO1xuICAgICAgICBjb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRUYXNrXCIpO1xuICAgICAgICBjb25zdCB0YXNrID0gbWFpbkNvbnRlbnRVSS5jcmVhdGVUYXNrKGRhdGUsIHRleHQpO1xuICAgICAgICB0aGlzLnRhc2tMaXN0ZW5lcih0YXNrKTtcbiAgICAgICAgYWRkVGFzay5iZWZvcmUodGFzayk7XG5cbiAgICAgICAgLy8gdGFza0JUTlNcblxuICAgICAgICB0aGlzLmFkZFRhc2tMaXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGZvcm1TdWJtaXRCVE4pO1xuICAgIGZvcm1DYW5jZWxCVE4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBmb3JtLnJlcGxhY2VXaXRoKG1haW5Db250ZW50VUkuY3JlYXRlQWRkVGFzaygpKTtcbiAgICAgIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYWRkVGFza0xpc3RlbmVyKCkge1xuICAgIGNvbnN0IGFkZFRhc2tET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgYWRkVGFza0RPTS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpID09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdGFza0Zvcm1ET00gPSBtYWluQ29udGVudFVJLmNyZWF0ZVRhc2tGb3JtKCk7XG4gICAgICAgIGNvbnN0IGRhdGVJTlBUID0gdGFza0Zvcm1ET00ucXVlcnlTZWxlY3RvcihcImlucHV0I3Rhc2tEYXRlXCIpO1xuICAgICAgICBkYXRlSU5QVC5mb2N1cygpO1xuICAgICAgICBhZGRUYXNrRE9NLnJlcGxhY2VXaXRoKHRhc2tGb3JtRE9NKTtcbiAgICAgICAgdGhpcy5mb3JtVGFza0xpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBVSUNvbnRyb2xsZXIgZnJvbSBcIi4vbW9kdWxlcy91aUNvbnRyb2xsZXJcIjtcblxuVUlDb250cm9sbGVyLmxvYWRQYWdlKCk7XG5cbmNvbnNvbGUubG9nKFwidGVzdFwiKTtcblxuY29uc3QgdGVzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpO1xuXG5jb25zb2xlLmxvZyh0ZXN0KTtcbiJdLCJuYW1lcyI6WyJOYXZiYXIiLCJzdGF0aWMiLCJjcmVhdGVCdXR0b24iLCJzeW1ib2wiLCJ0ZXh0IiwiYnV0dG9uIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3BhbiIsImNsYXNzTGlzdCIsInRleHRDb250ZW50IiwiYnV0dG9uVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJpZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtRGl2IiwibGFiZWwiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJpbnB1dCIsInJlcXVpcmVkIiwiY29uc29sZSIsImxvZyIsImJ1dHRvbkRpdiIsIm5hbWUiLCJwcm9qZWN0IiwiYWRkUHJvamVjdCIsIm1haW5Db250ZW50VUkiLCJkYXRlVHh0IiwidGFza0RpdiIsInRhc2tJbmZvRGl2IiwiY2hlY2tCb3hJbnB0IiwiZGF0ZUlucHQiLCJ2YWx1ZSIsInJlYWRPbmx5IiwidGV4dE5vZGUiLCJmdW5jdGlvbkRpdiIsInNwYW5FZGl0Iiwic3BhbkRlbGV0ZSIsImFkZFRhc2tEaXYiLCJhZGRUYXNrRm9ybSIsImlubmVySFRNTCIsInN1Ym1pdEJUTiIsInF1ZXJ5U2VsZWN0b3IiLCJjYW5jZWxCVE4iLCJmb2N1cyIsInRoaXMiLCJhZGRQcm9qZWN0TGlzdGVuZXIiLCJhZGRUYXNrTGlzdGVuZXIiLCJoZWFkZXJEaXYiLCJmb290ZXJEaXYiLCJpbnB1dEZpZWxkIiwiZm9ybSIsInJlcGxhY2VXaXRoIiwicmV0dXJuQWRkUHJvamVjdEJUTiIsInByb2plY3RMaXN0RE9NTG9jYXRpb24iLCJiZWZvcmUiLCJyZXR1cm5Qcm9qZWN0SXRlbSIsImFkZFByb2plY3RET00iLCJsb2FkQWRkUHJvamVjdCIsImZvcm1CVE5TIiwiZGVsZXRlQnV0dG9uIiwiZWRpdEJ1dHRvbiIsImNoZWNrYm94IiwicmVtb3ZlIiwiY3VycmVudCIsImN1cnJlbnRUZXh0IiwiY3VycmVudERhdGUiLCJlZGl0VGFza0Zvcm0iLCJjcmVhdGVUYXNrRm9ybSIsImVkaXRUYXNrTGlzdGVuZXIiLCJ0b2dnbGUiLCJlZGl0Rm9ybSIsImZvcm1TdWJtaXRCVE4iLCJmb3JtQ2FuY2VsQlROIiwiZm9ybURhdGVJbnB1dCIsImZvcm1UZXh0SW5wdXQiLCJkYXRlIiwidGFzayIsImNyZWF0ZVRhc2siLCJ0YXNrTGlzdGVuZXIiLCJjcmVhdGVBZGRUYXNrIiwiYWRkVGFzayIsImFkZFRhc2tET00iLCJ0YXNrRm9ybURPTSIsImZvcm1UYXNrTGlzdGVuZXIiLCJsb2FkUGFnZSIsInRlc3QiXSwic291cmNlUm9vdCI6IiJ9
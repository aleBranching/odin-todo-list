(()=>{"use strict";class e{static loadAddProject(){function e(e,t){const n=document.createElement("button"),r=document.createElement("span");r.classList="material-symbols-outlined",r.textContent=e;const s=document.createTextNode(t);return n.appendChild(r),n.appendChild(s),n.id=`form${t}`,n.addEventListener("click",(e=>{e.preventDefault()})),n}const t=document.createElement("form");t.id="addProjectForm";const n=document.createElement("label");n.setAttribute("for","projectName"),n.innerText="Name:";const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("name","projectName"),r.setAttribute("id","projectName"),r.required=!0,console.log(r);const s=document.createElement("div");return s.classList="buttons",s.appendChild(e("done","Submit")),s.appendChild(e("cancel","Cancel")),t.appendChild(n),t.appendChild(r),t.appendChild(s),t}static returnProjectItem(e){const t=document.createElement("div");return t.textContent=e,t}static returnAddProjectBTN(){const e=document.createElement("div");return e.textContent="+ Add project",e.id="projectAdder",e}}class t{static createTask(e,t){const n=document.createElement("div");n.classList="task";const r=document.createElement("div");r.classList="taskInfo";const s=document.createElement("input");s.setAttribute("type","checkbox"),s.setAttribute("name","finishedTask"),s.setAttribute("id","finishedTask");const c=document.createElement("input");c.setAttribute("type","date"),c.value=e,c.readOnly=!0;const a=document.createElement("div");a.classList="noteText",a.textContent=t,r.appendChild(s),r.appendChild(c),r.appendChild(a),n.appendChild(r);const o=document.createElement("div");o.classList="functions";const d=document.createElement("span");d.classList="material-symbols-outlined edit",d.textContent="edit";const i=document.createElement("span");return i.textContent="delete",i.classList="material-symbols-outlined delete",o.appendChild(d),o.appendChild(i),n.appendChild(o),n}static createAddTask(){const e=document.createElement("div");return e.classList="addTask",e.textContent="+ Add Task",e}static createTaskForm(){const e=document.createElement("div");e.classList="addTaskForm",e.innerHTML='\n    <form action="">\n      <div>\n        <label for="date">Date:</label>\n        <input type="date" name="taskDate" id="taskDate" />\n        <label for="Task">Task:</label>\n        <input type="text" name="taskText" id="taskText" />\n      </div>\n      <div class="taskFormButtons">\n        <button id="formSubmit">\n          <span class="material-symbols-outlined">done</span>Submit\n        </button>\n        <button id="formCancel">\n          <span class="material-symbols-outlined">cancel</span>Cancel\n        </button>\n      </div>\n    </form>\n  ';const t=e.querySelector("#formSubmit"),n=e.querySelector("#formCancel");return t.addEventListener("click",(e=>{e.preventDefault()})),n.addEventListener("click",(e=>{e.preventDefault()})),e}}class n{constructor(e){this.name=e,this.tasks=[]}setName(e){this.name=e}getName(){return this.name}getTasks(){return this.tasks}getTask(e){return this.tasks.find((t=>t.getName()===e))}addTask(e){return this.tasks.push(e)}}const r=new class{constructor(){this.projects=[],this.projects.push(new n("main"))}getProjects(){return this.projects}getAProject(e){return this.projects.find((t=>t.getName()===e))}addProject(e){return this.projects.push(new n(`${e}`))}};console.log(r.projects),console.log(r.getAProject("main")),class{static loadPage(){this.addProjectListener(),this.projectListener(),this.addTaskListener()}static createHeader(){const e=document.createElement("div");return e.classList="header",e}static createFooter(){const e=document.createElement("div");return e.classList="footer",e}static formBTNS(){const t=document.querySelector("#formSubmit"),n=document.querySelector("#formCancel"),r=document.querySelector("#projectName"),s=document.querySelector("#addProjectForm");r.focus(),t.addEventListener("click",(t=>{if(t.preventDefault(),""!==r.value){console.log(r.value),r.textContent="",s.replaceWith(e.returnAddProjectBTN()),this.addProjectListener();const t=document.querySelector("div#projectAdder");console.log(t),t.before(e.returnProjectItem(r.value))}})),n.addEventListener("click",(t=>{t.preventDefault(),console.log("test"),s.replaceWith(e.returnAddProjectBTN()),this.addProjectListener()}))}static projectListener(){document.querySelectorAll("div#projectItem").forEach((e=>{e.addEventListener("click",(()=>{const t=e.textContent;console.log(t)}))}))}static addProjectListener(){const t=document.querySelector("#projectAdder");t.addEventListener("click",(()=>{t.replaceWith(e.loadAddProject()),this.formBTNS()}))}static taskListener(e){const n=e.querySelector(".delete"),r=e.querySelector(".edit"),s=e.querySelector("#finishedTask");n.addEventListener("click",(()=>{e.remove()})),r.addEventListener("click",(()=>{const n=e,r=e.querySelector(".noteText").textContent,s=e.querySelector('input[type="date"]').value,c=t.createTaskForm();console.log("current Text",r),console.log("current Date",s),c.querySelector("#taskText").value=r,c.querySelector("#taskDate").value=s,n.replaceWith(c),this.editTaskListener(c,n)})),s.addEventListener("click",(()=>{e.classList.toggle("checked")}))}static editTaskListener(e,n){const r=e.querySelector("#formSubmit"),s=e.querySelector("#formCancel"),c=e.querySelector("#taskDate"),a=e.querySelector("#taskText");r.addEventListener("click",(n=>{if(console.log("zzzz"),n.preventDefault(),""!==c.value&&""!==c.value){const n=c.value,r=a.value,s=t.createTask(n,r);e.replaceWith(s),this.taskListener(s)}})),console.log(r),s.addEventListener("click",(t=>{t.preventDefault(),e.replaceWith(n),this.taskListener(n)}))}static formTaskListener(){const e=document.querySelector("#formSubmit"),n=document.querySelector("#formCancel"),r=document.querySelector("#taskDate"),s=document.querySelector(".addTaskForm"),c=document.querySelector("#taskText");e.addEventListener("click",(e=>{if(console.log("zzzz"),e.preventDefault(),""!==r.value&&""!==r.value){const e=r.value,n=c.value;s.replaceWith(t.createAddTask());const a=document.querySelector(".addTask"),o=t.createTask(e,n);this.taskListener(o),a.before(o),this.addTaskListener(),this.projectListener()}})),console.log(e),n.addEventListener("click",(e=>{e.preventDefault(),s.replaceWith(t.createAddTask()),this.addTaskListener()}))}static addTaskListener(){const e=document.querySelector(".addTask");e.addEventListener("click",(n=>{if(n.preventDefault(),null==document.querySelector(".addTaskForm")){const n=t.createTaskForm();n.querySelector("input#taskDate").focus(),e.replaceWith(n),this.formTaskListener()}}))}}.loadPage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVdoQyxZQUFZaUMsR0FFdkJ4RCxLQUFLeUQsa0JBQ1AsSUFFSixHRi9MV0MsVSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvbmF2YmFyLmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvbWFpbkNvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvdG9kb0xpc3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvLWxpc3QvLi9zcmMvbW9kdWxlcy91aUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IFVJQ29udHJvbGxlciBmcm9tIFwiLi91aUNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2YmFyIHtcbiAgc3RhdGljIGxvYWRBZGRQcm9qZWN0KCkge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihzeW1ib2wsIHRleHQpIHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBzcGFuLmNsYXNzTGlzdCA9IFwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiO1xuICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHN5bWJvbDtcblxuICAgICAgY29uc3QgYnV0dG9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuXG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICBidXR0b24uYXBwZW5kQ2hpbGQoYnV0dG9uVGV4dCk7XG4gICAgICBidXR0b24uaWQgPSBgZm9ybSR7dGV4dH1gO1xuXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGVzdFwiKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIGNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzQWRkZXJcIik7XG4gICAgLy8gYWRkUHJvamVjdC50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICBjb25zdCBmb3JtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgZm9ybURpdi5pZCA9IFwiYWRkUHJvamVjdEZvcm1cIjtcblxuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInByb2plY3ROYW1lXCIpO1xuICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiTmFtZTpcIjtcblxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIGlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJwcm9qZWN0TmFtZVwiKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3ROYW1lXCIpO1xuICAgIGlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhpbnB1dCk7XG5cbiAgICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJ1dHRvbkRpdi5jbGFzc0xpc3QgPSBcImJ1dHRvbnNcIjtcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24oXCJkb25lXCIsIFwiU3VibWl0XCIpKTtcbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQoY3JlYXRlQnV0dG9uKFwiY2FuY2VsXCIsIFwiQ2FuY2VsXCIpKTtcblxuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgIGZvcm1EaXYuYXBwZW5kQ2hpbGQoYnV0dG9uRGl2KTtcblxuICAgIC8vIGxldDtcbiAgICByZXR1cm4gZm9ybURpdjtcbiAgfVxuXG4gIHN0YXRpYyByZXR1cm5Qcm9qZWN0SXRlbShuYW1lKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgcmV0dXJuIHByb2plY3Q7XG4gIH1cblxuICBzdGF0aWMgcmV0dXJuQWRkUHJvamVjdEJUTigpIHtcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhZGRQcm9qZWN0LnRleHRDb250ZW50ID0gXCIrIEFkZCBwcm9qZWN0XCI7XG4gICAgYWRkUHJvamVjdC5pZCA9IFwicHJvamVjdEFkZGVyXCI7XG4gICAgLy8gYWRkUHJvamVjdC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgLy8gYWRkUHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIC8vICAgYWRkUHJvamVjdC5yZXBsYWNlV2l0aCh0aGlzLmxvYWRBZGRQcm9qZWN0KCkpO1xuICAgIC8vICAgLy8gVUlDb250cm9sbGVyLmFkZFByb2plY3RCVE4uZm9ybUJUTlMoKTtcbiAgICAvLyAgIC8vIGFkZFByb2plY3RET00oKTtcbiAgICAvLyB9KTtcbiAgICByZXR1cm4gYWRkUHJvamVjdDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZm9ybWF0UmVsYXRpdmUgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbWFpbkNvbnRlbnRVSSB7XG4gIHN0YXRpYyBjcmVhdGVUYXNrKGRhdGVUeHQsIHRleHQpIHtcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrRGl2LmNsYXNzTGlzdCA9IFwidGFza1wiO1xuXG4gICAgY29uc3QgdGFza0luZm9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tJbmZvRGl2LmNsYXNzTGlzdCA9IFwidGFza0luZm9cIjtcblxuICAgIGNvbnN0IGNoZWNrQm94SW5wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjaGVja0JveElucHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgIGNoZWNrQm94SW5wdC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiZmluaXNoZWRUYXNrXCIpO1xuICAgIGNoZWNrQm94SW5wdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImZpbmlzaGVkVGFza1wiKTtcblxuICAgIGNvbnN0IGRhdGVJbnB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGRhdGVJbnB0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgIGRhdGVJbnB0LnZhbHVlID0gZGF0ZVR4dDtcbiAgICBkYXRlSW5wdC5yZWFkT25seSA9IHRydWU7XG5cbiAgICBjb25zdCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGV4dE5vZGUuY2xhc3NMaXN0ID0gXCJub3RlVGV4dFwiO1xuICAgIHRleHROb2RlLnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIHRhc2tJbmZvRGl2LmFwcGVuZENoaWxkKGNoZWNrQm94SW5wdCk7XG4gICAgdGFza0luZm9EaXYuYXBwZW5kQ2hpbGQoZGF0ZUlucHQpO1xuICAgIHRhc2tJbmZvRGl2LmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0luZm9EaXYpO1xuXG4gICAgY29uc3QgZnVuY3Rpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGZ1bmN0aW9uRGl2LmNsYXNzTGlzdCA9IFwiZnVuY3Rpb25zXCI7XG5cbiAgICBjb25zdCBzcGFuRWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHNwYW5FZGl0LmNsYXNzTGlzdCA9IFwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBlZGl0XCI7XG4gICAgc3BhbkVkaXQudGV4dENvbnRlbnQgPSBcImVkaXRcIjtcbiAgICBjb25zdCBzcGFuRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgc3BhbkRlbGV0ZS50ZXh0Q29udGVudCA9IFwiZGVsZXRlXCI7XG4gICAgc3BhbkRlbGV0ZS5jbGFzc0xpc3QgPSBcIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZGVsZXRlXCI7XG5cbiAgICBmdW5jdGlvbkRpdi5hcHBlbmRDaGlsZChzcGFuRWRpdCk7XG4gICAgZnVuY3Rpb25EaXYuYXBwZW5kQ2hpbGQoc3BhbkRlbGV0ZSk7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZChmdW5jdGlvbkRpdik7XG5cbiAgICByZXR1cm4gdGFza0RpdjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVBZGRUYXNrKCkge1xuICAgIGNvbnN0IGFkZFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFkZFRhc2tEaXYuY2xhc3NMaXN0ID0gXCJhZGRUYXNrXCI7XG4gICAgYWRkVGFza0Rpdi50ZXh0Q29udGVudCA9IFwiKyBBZGQgVGFza1wiO1xuICAgIHJldHVybiBhZGRUYXNrRGl2O1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZVRhc2tGb3JtKCkge1xuICAgIC8vIENoZWF0aW5nPyB5ZXMuIFRpcmVkPyB5ZXMuXG4gICAgY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFkZFRhc2tGb3JtLmNsYXNzTGlzdCA9IFwiYWRkVGFza0Zvcm1cIjtcblxuICAgIGNvbnN0IGFsbEhUTUwgPSBgXG4gICAgPGZvcm0gYWN0aW9uPVwiXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8bGFiZWwgZm9yPVwiZGF0ZVwiPkRhdGU6PC9sYWJlbD5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgbmFtZT1cInRhc2tEYXRlXCIgaWQ9XCJ0YXNrRGF0ZVwiIC8+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJUYXNrXCI+VGFzazo8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidGFza1RleHRcIiBpZD1cInRhc2tUZXh0XCIgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRhc2tGb3JtQnV0dG9uc1wiPlxuICAgICAgICA8YnV0dG9uIGlkPVwiZm9ybVN1Ym1pdFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiPmRvbmU8L3NwYW4+U3VibWl0XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGlkPVwiZm9ybUNhbmNlbFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZFwiPmNhbmNlbDwvc3Bhbj5DYW5jZWxcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Zvcm0+XG4gIGA7XG5cbiAgICBhZGRUYXNrRm9ybS5pbm5lckhUTUwgPSBhbGxIVE1MO1xuXG4gICAgY29uc3Qgc3VibWl0QlROID0gYWRkVGFza0Zvcm0ucXVlcnlTZWxlY3RvcihcIiNmb3JtU3VibWl0XCIpO1xuICAgIGNvbnN0IGNhbmNlbEJUTiA9IGFkZFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybUNhbmNlbFwiKTtcblxuICAgIHN1Ym1pdEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIGNhbmNlbEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWRkVGFza0Zvcm07XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3Qge1xuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnRhc2tzID0gW107XG4gIH1cblxuICBzZXROYW1lKG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG5cbiAgZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgZ2V0VGFza3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3M7XG4gIH1cblxuICBnZXRUYXNrKHRhc2tOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5nZXROYW1lKCkgPT09IHRhc2tOYW1lKTtcbiAgfVxuXG4gIGFkZFRhc2sodGFzaykge1xuICAgIHJldHVybiB0aGlzLnRhc2tzLnB1c2godGFzayk7XG4gIH1cbn1cbiIsImltcG9ydCBVSUNvbnRyb2xsZXIgZnJvbSBcIi4vbW9kdWxlcy91aUNvbnRyb2xsZXJcIjtcbmltcG9ydCBUb2RvTGlzdCBmcm9tIFwiLi9tb2R1bGVzL3RvZG9MaXN0XCI7XG5cbmNvbnN0IGFUb2RvTGlzdCA9IG5ldyBUb2RvTGlzdCgpO1xuXG5jb25zb2xlLmxvZyhhVG9kb0xpc3QucHJvamVjdHMpO1xuXG5jb25zb2xlLmxvZyhhVG9kb0xpc3QuZ2V0QVByb2plY3QoXCJtYWluXCIpKTtcblxuVUlDb250cm9sbGVyLmxvYWRQYWdlKCk7XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG9MaXN0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChcIm1haW5cIikpO1xuICB9XG5cbiAgZ2V0UHJvamVjdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHM7XG4gIH1cblxuICAvLyBnZXRQcm9qZWN0KG5hbWUpIHtcbiAgLy8gICB0aGlzLnByb2plY3RzLmZvckVhY2goKGFQcm9qZWN0KSA9PiB7XG4gIC8vICAgICBpZiAoYVByb2plY3QubmFtZSA9PT0gbmFtZSkge1xuICAvLyAgICAgICByZXR1cm4gYVByb2plY3Q7XG4gIC8vICAgICB9XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICBnZXRBUHJvamVjdChuYW1lKSB7XG4gICAgLy8gY29uc29sZS5sb2cob2JqZWN0KTtcbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2plY3RzWzBdLmdldE5hbWUoKSk7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5nZXROYW1lKCkgPT09IG5hbWUpO1xuICB9XG5cbiAgYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChgJHtwcm9qZWN0fWApKTtcbiAgfVxufVxuIiwiaW1wb3J0IE5hdmJhciBmcm9tIFwiLi9uYXZiYXJcIjtcbmltcG9ydCBtYWluQ29udGVudFVJIGZyb20gXCIuL21haW5Db250ZW50XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJQ29udHJvbGxlciB7XG4gIHN0YXRpYyBsb2FkUGFnZSgpIHtcbiAgICB0aGlzLmFkZFByb2plY3RMaXN0ZW5lcigpO1xuICAgIHRoaXMucHJvamVjdExpc3RlbmVyKCk7XG4gICAgdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICAvLyBjb25zdCBib2R5RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG4gICAgLy8gYm9keURpdi5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUhlYWRlcigpKTtcbiAgICAvLyBib2R5RGl2LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlRm9vdGVyKCkpO1xuICAgIC8vIGJvZHlEaXYuYXBwZW5kQ2hpbGQoTmF2YmFyLmxvYWROYXYoKSk7XG4gICAgLy8gYm9keURpdi5hcHBlbmRDaGlsZChtYWluQ29udGVudC5jcmVhdGVNYWluKCkpO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUhlYWRlcigpIHtcbiAgICBjb25zdCBoZWFkZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhlYWRlckRpdi5jbGFzc0xpc3QgPSBcImhlYWRlclwiO1xuICAgIHJldHVybiBoZWFkZXJEaXY7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlRm9vdGVyKCkge1xuICAgIGNvbnN0IGZvb3RlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZm9vdGVyRGl2LmNsYXNzTGlzdCA9IFwiZm9vdGVyXCI7XG4gICAgcmV0dXJuIGZvb3RlckRpdjtcbiAgfVxuXG4gIHN0YXRpYyBmb3JtQlROUygpIHtcbiAgICBjb25zdCBzdWJtaXRCVE4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1TdWJtaXRcIik7XG4gICAgY29uc3QgY2FuY2VsQlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtQ2FuY2VsXCIpO1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3ROYW1lXCIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZFByb2plY3RGb3JtXCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RMaXN0RE9NTG9jYXRpb24pO1xuICAgIGlucHV0RmllbGQuZm9jdXMoKTtcblxuICAgIHN1Ym1pdEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIC8vIGNvbnN0IGxhc3RQcm9qZWN0RE9NID0gcHJvamVjdExpc3RET01bcHJvamVjdExpc3RET00ubGVuZ3RoIC0gMV07XG5cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChpbnB1dEZpZWxkLnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0RmllbGQudmFsdWUpO1xuICAgICAgICBpbnB1dEZpZWxkLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgZm9ybS5yZXBsYWNlV2l0aChOYXZiYXIucmV0dXJuQWRkUHJvamVjdEJUTigpKTtcbiAgICAgICAgdGhpcy5hZGRQcm9qZWN0TGlzdGVuZXIoKTtcblxuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdERPTUxvY2F0aW9uID1cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2I3Byb2plY3RBZGRlclwiKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdExpc3RET01Mb2NhdGlvbik7XG4gICAgICAgIHByb2plY3RMaXN0RE9NTG9jYXRpb24uYmVmb3JlKFxuICAgICAgICAgIE5hdmJhci5yZXR1cm5Qcm9qZWN0SXRlbShpbnB1dEZpZWxkLnZhbHVlKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY2FuY2VsQlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc29sZS5sb2coXCJ0ZXN0XCIpO1xuXG4gICAgICBmb3JtLnJlcGxhY2VXaXRoKE5hdmJhci5yZXR1cm5BZGRQcm9qZWN0QlROKCkpO1xuICAgICAgdGhpcy5hZGRQcm9qZWN0TGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBwcm9qZWN0TGlzdGVuZXIoKSB7XG4gICAgY29uc3QgYWxsUHJvamVjdHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImRpdiNwcm9qZWN0SXRlbVwiKTtcblxuICAgIGFsbFByb2plY3RzTGlzdC5mb3JFYWNoKChhUHJvamVjdERPTSkgPT4ge1xuICAgICAgYVByb2plY3RET00uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBhUHJvamVjdERPTS50ZXh0Q29udGVudDtcblxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TmFtZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhZGRQcm9qZWN0TGlzdGVuZXIoKSB7XG4gICAgY29uc3QgYWRkUHJvamVjdERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdEFkZGVyXCIpO1xuICAgIGFkZFByb2plY3RET00uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGFkZFByb2plY3RET00ucmVwbGFjZVdpdGgoTmF2YmFyLmxvYWRBZGRQcm9qZWN0KCkpO1xuICAgICAgdGhpcy5mb3JtQlROUygpO1xuICAgICAgLy8gYWRkUHJvamVjdERPTSgpO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIHRhc2tMaXN0ZW5lcih0YXNrRGl2KSB7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZVwiKTtcbiAgICBjb25zdCBlZGl0QnV0dG9uID0gdGFza0Rpdi5xdWVyeVNlbGVjdG9yKFwiLmVkaXRcIik7XG4gICAgY29uc3QgY2hlY2tib3ggPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoXCIjZmluaXNoZWRUYXNrXCIpO1xuXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0YXNrRGl2LnJlbW92ZSgpO1xuICAgIH0pO1xuXG4gICAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudCA9IHRhc2tEaXY7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoXCIubm90ZVRleHRcIikpO1xuICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0YXNrRGl2LnF1ZXJ5U2VsZWN0b3IoXCIubm90ZVRleHRcIikudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHRhc2tEaXYucXVlcnlTZWxlY3RvcihgaW5wdXRbdHlwZT1cImRhdGVcIl1gKS52YWx1ZTtcbiAgICAgIGNvbnN0IGVkaXRUYXNrRm9ybSA9IG1haW5Db250ZW50VUkuY3JlYXRlVGFza0Zvcm0oKTtcblxuICAgICAgY29uc29sZS5sb2coXCJjdXJyZW50IFRleHRcIiwgY3VycmVudFRleHQpO1xuICAgICAgY29uc29sZS5sb2coXCJjdXJyZW50IERhdGVcIiwgY3VycmVudERhdGUpO1xuXG4gICAgICBlZGl0VGFza0Zvcm0ucXVlcnlTZWxlY3RvcihcIiN0YXNrVGV4dFwiKS52YWx1ZSA9IGN1cnJlbnRUZXh0O1xuICAgICAgZWRpdFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjdGFza0RhdGVcIikudmFsdWUgPSBjdXJyZW50RGF0ZTtcblxuICAgICAgLy8gZWRpdFRhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoKTtcblxuICAgICAgY3VycmVudC5yZXBsYWNlV2l0aChlZGl0VGFza0Zvcm0pO1xuICAgICAgdGhpcy5lZGl0VGFza0xpc3RlbmVyKGVkaXRUYXNrRm9ybSwgY3VycmVudCk7XG4gICAgfSk7XG5cbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGFza0Rpdi5jbGFzc0xpc3QudG9nZ2xlKFwiY2hlY2tlZFwiKTtcbiAgICB9KTtcblxuICAgIC8vIGxldDtcbiAgfVxuXG4gIHN0YXRpYyBlZGl0VGFza0xpc3RlbmVyKGVkaXRGb3JtLCBjdXJyZW50KSB7XG4gICAgY29uc3QgZm9ybVN1Ym1pdEJUTiA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVN1Ym1pdFwiKTtcbiAgICBjb25zdCBmb3JtQ2FuY2VsQlROID0gZWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiNmb3JtQ2FuY2VsXCIpO1xuICAgIGNvbnN0IGZvcm1EYXRlSW5wdXQgPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpO1xuICAgIC8vIGNvbnN0IGZvcm0gPSBlZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tGb3JtXCIpO1xuXG4gICAgY29uc3QgZm9ybVRleHRJbnB1dCA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1RleHRcIik7XG4gICAgZm9ybVN1Ym1pdEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwienp6elwiKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChmb3JtRGF0ZUlucHV0LnZhbHVlICE9PSBcIlwiICYmIGZvcm1EYXRlSW5wdXQudmFsdWUgIT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGZvcm1EYXRlSW5wdXQudmFsdWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtVGV4dElucHV0LnZhbHVlO1xuXG4gICAgICAgIC8vIGVkaXRGb3JtLnJlcGxhY2VXaXRoKG1haW5Db250ZW50VUkuY3JlYXRlVGFzaygpKTtcbiAgICAgICAgLy8gY29uc3QgYWRkVGFzayA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza1wiKTtcbiAgICAgICAgY29uc3QgdGFzayA9IG1haW5Db250ZW50VUkuY3JlYXRlVGFzayhkYXRlLCB0ZXh0KTtcbiAgICAgICAgZWRpdEZvcm0ucmVwbGFjZVdpdGgodGFzayk7XG4gICAgICAgIHRoaXMudGFza0xpc3RlbmVyKHRhc2spO1xuXG4gICAgICAgIC8vIHRhc2tCVE5TXG5cbiAgICAgICAgLy8gdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhmb3JtU3VibWl0QlROKTtcbiAgICBmb3JtQ2FuY2VsQlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZWRpdEZvcm0ucmVwbGFjZVdpdGgoY3VycmVudCk7XG4gICAgICAvLyB0aGlzLmFkZFRhc2tMaXN0ZW5lcigpO1xuICAgICAgdGhpcy50YXNrTGlzdGVuZXIoY3VycmVudCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZm9ybVRhc2tMaXN0ZW5lcigpIHtcbiAgICBjb25zdCBmb3JtU3VibWl0QlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtU3VibWl0XCIpO1xuICAgIGNvbnN0IGZvcm1DYW5jZWxCVE4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1DYW5jZWxcIik7XG4gICAgY29uc3QgZm9ybURhdGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza0RhdGVcIik7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0Zvcm1cIik7XG5cbiAgICBjb25zdCBmb3JtVGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrVGV4dFwiKTtcbiAgICBmb3JtU3VibWl0QlROLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJ6enp6XCIpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGZvcm1EYXRlSW5wdXQudmFsdWUgIT09IFwiXCIgJiYgZm9ybURhdGVJbnB1dC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICBjb25zdCBkYXRlID0gZm9ybURhdGVJbnB1dC52YWx1ZTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1UZXh0SW5wdXQudmFsdWU7XG5cbiAgICAgICAgZm9ybS5yZXBsYWNlV2l0aChtYWluQ29udGVudFVJLmNyZWF0ZUFkZFRhc2soKSk7XG4gICAgICAgIGNvbnN0IGFkZFRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZFRhc2tcIik7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBtYWluQ29udGVudFVJLmNyZWF0ZVRhc2soZGF0ZSwgdGV4dCk7XG4gICAgICAgIHRoaXMudGFza0xpc3RlbmVyKHRhc2spO1xuICAgICAgICBhZGRUYXNrLmJlZm9yZSh0YXNrKTtcblxuICAgICAgICAvLyB0YXNrQlROU1xuXG4gICAgICAgIHRoaXMuYWRkVGFza0xpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMucHJvamVjdExpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coZm9ybVN1Ym1pdEJUTik7XG4gICAgZm9ybUNhbmNlbEJUTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGZvcm0ucmVwbGFjZVdpdGgobWFpbkNvbnRlbnRVSS5jcmVhdGVBZGRUYXNrKCkpO1xuICAgICAgdGhpcy5hZGRUYXNrTGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhZGRUYXNrTGlzdGVuZXIoKSB7XG4gICAgY29uc3QgYWRkVGFza0RPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza1wiKTtcbiAgICBhZGRUYXNrRE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0Zvcm1cIikgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0YXNrRm9ybURPTSA9IG1haW5Db250ZW50VUkuY3JlYXRlVGFza0Zvcm0oKTtcbiAgICAgICAgY29uc3QgZGF0ZUlOUFQgPSB0YXNrRm9ybURPTS5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjdGFza0RhdGVcIik7XG4gICAgICAgIGRhdGVJTlBULmZvY3VzKCk7XG4gICAgICAgIGFkZFRhc2tET00ucmVwbGFjZVdpdGgodGFza0Zvcm1ET00pO1xuICAgICAgICAvLyB0aGlzLmFkZFRhc2tMaXN0ZW5lcigpO1xuICAgICAgICB0aGlzLmZvcm1UYXNrTGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5hdmJhciIsInN0YXRpYyIsImNyZWF0ZUJ1dHRvbiIsInN5bWJvbCIsInRleHQiLCJidXR0b24iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcGFuIiwiY2xhc3NMaXN0IiwidGV4dENvbnRlbnQiLCJidXR0b25UZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsImlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImZvcm1EaXYiLCJsYWJlbCIsInNldEF0dHJpYnV0ZSIsImlubmVyVGV4dCIsImlucHV0IiwicmVxdWlyZWQiLCJjb25zb2xlIiwibG9nIiwiYnV0dG9uRGl2IiwibmFtZSIsInByb2plY3QiLCJhZGRQcm9qZWN0IiwibWFpbkNvbnRlbnRVSSIsImRhdGVUeHQiLCJ0YXNrRGl2IiwidGFza0luZm9EaXYiLCJjaGVja0JveElucHQiLCJkYXRlSW5wdCIsInZhbHVlIiwicmVhZE9ubHkiLCJ0ZXh0Tm9kZSIsImZ1bmN0aW9uRGl2Iiwic3BhbkVkaXQiLCJzcGFuRGVsZXRlIiwiYWRkVGFza0RpdiIsImFkZFRhc2tGb3JtIiwiaW5uZXJIVE1MIiwic3VibWl0QlROIiwicXVlcnlTZWxlY3RvciIsImNhbmNlbEJUTiIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJ0YXNrcyIsInNldE5hbWUiLCJnZXROYW1lIiwiZ2V0VGFza3MiLCJnZXRUYXNrIiwidGFza05hbWUiLCJmaW5kIiwidGFzayIsImFkZFRhc2siLCJwdXNoIiwiYVRvZG9MaXN0IiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsImdldEFQcm9qZWN0IiwiYWRkUHJvamVjdExpc3RlbmVyIiwicHJvamVjdExpc3RlbmVyIiwiYWRkVGFza0xpc3RlbmVyIiwiaGVhZGVyRGl2IiwiZm9vdGVyRGl2IiwiaW5wdXRGaWVsZCIsImZvcm0iLCJmb2N1cyIsInJlcGxhY2VXaXRoIiwicmV0dXJuQWRkUHJvamVjdEJUTiIsInByb2plY3RMaXN0RE9NTG9jYXRpb24iLCJiZWZvcmUiLCJyZXR1cm5Qcm9qZWN0SXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYVByb2plY3RET00iLCJwcm9qZWN0TmFtZSIsImFkZFByb2plY3RET00iLCJsb2FkQWRkUHJvamVjdCIsImZvcm1CVE5TIiwiZGVsZXRlQnV0dG9uIiwiZWRpdEJ1dHRvbiIsImNoZWNrYm94IiwicmVtb3ZlIiwiY3VycmVudCIsImN1cnJlbnRUZXh0IiwiY3VycmVudERhdGUiLCJlZGl0VGFza0Zvcm0iLCJjcmVhdGVUYXNrRm9ybSIsImVkaXRUYXNrTGlzdGVuZXIiLCJ0b2dnbGUiLCJlZGl0Rm9ybSIsImZvcm1TdWJtaXRCVE4iLCJmb3JtQ2FuY2VsQlROIiwiZm9ybURhdGVJbnB1dCIsImZvcm1UZXh0SW5wdXQiLCJkYXRlIiwiY3JlYXRlVGFzayIsInRhc2tMaXN0ZW5lciIsImNyZWF0ZUFkZFRhc2siLCJhZGRUYXNrRE9NIiwidGFza0Zvcm1ET00iLCJmb3JtVGFza0xpc3RlbmVyIiwibG9hZFBhZ2UiXSwic291cmNlUm9vdCI6IiJ9